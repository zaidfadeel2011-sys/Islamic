<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0b3d2e">
    <title>الموقع الإسلامي الذكي</title>
    <style>
        :root {
            --primary: #0b3d2e;
            --secondary: #146356;
            --gold: #d4af37;
            --accent: #0a8;
            --card-bg: rgba(255, 255, 255, 0.05);
            --text: #ffffff;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --transition: all 0.3s ease;
        }

        [data-theme="green"] {
            --primary: #0b3d2e;
            --secondary: #146356;
            --gold: #d4af37;
            --accent: #0a8;
            --card-bg: rgba(255, 255, 255, 0.05);
        }

        [data-theme="dark"] {
            --primary: #0a1929;
            --secondary: #1a2b3c;
            --gold: #d4af37;
            --accent: #4dabf7;
            --card-bg: rgba(30, 41, 59, 0.8);
            --text: #e2e8f0;
        }

        [data-theme="gold"] {
            --primary: #3a2c0a;
            --secondary: #5a4a1a;
            --gold: #ffd700;
            --accent: #ffaa00;
            --card-bg: rgba(90, 74, 26, 0.3);
        }

        [data-theme="navy"] {
            --primary: #001f3f;
            --secondary: #002b5c;
            --gold: #d4af37;
            --accent: #0af;
            --card-bg: rgba(0, 31, 63, 0.3);
        }

        [data-theme="red"] {
            --primary: #3b0000;
            --secondary: #5a0000;
            --gold: #d4af37;
            --accent: #f00;
            --card-bg: rgba(59, 0, 0, 0.3);
        }

        [data-theme="blue"] {
            --primary: #003366;
            --secondary: #004d99;
            --gold: #d4af37;
            --accent: #3399ff;
            --card-bg: rgba(0, 51, 102, 0.3);
        }

        [data-theme="white"] {
            --primary: #ffffff;
            --secondary: #f0f0f0;
            --gold: #b8860b;
            --accent: #0b3d2e;
            --card-bg: rgba(240, 240, 240, 0.9);
            --text: #333333;
        }

        [data-theme="orange"] {
            --primary: #ff6b00;
            --secondary: #ff8c42;
            --gold: #d4af37;
            --accent: #ff4500;
            --card-bg: rgba(255, 107, 0, 0.1);
        }

        [data-theme="purple"] {
            --primary: #4b0082;
            --secondary: #663399;
            --gold: #d4af37;
            --accent: #9370db;
            --card-bg: rgba(75, 0, 130, 0.3);
        }

        * {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans Arabic', sans-serif;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            transition: background 0.5s ease;
        }

        /* شاشة التحميل */
        #splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s;
        }

        .splash-logo {
            font-size: 5rem;
            color: var(--gold);
            margin-bottom: 20px;
            animation: pulse 2s infinite;
            text-shadow: 0 4px 20px rgba(212, 175, 55, 0.5);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.9; }
        }

        .splash-title {
            color: var(--gold);
            font-size: 2rem;
            margin-bottom: 30px;
            text-align: center;
            font-weight: bold;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(212, 175, 55, 0.3);
            border-top-color: var(--gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* الصفحات */
        .page {
            position: fixed;
            top: 70px;
            left: 0;
            width: 100%;
            height: calc(100% - 150px);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            display: none;
            animation: fadeIn 0.3s ease;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding-bottom: 20px;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* الهيدر العلوي */
        .main-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 70px;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            border-bottom: 2px solid var(--gold);
            z-index: 1000;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--gold), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.3rem;
            color: #000;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }

        .user-name {
            font-size: 1rem;
            font-weight: 600;
            color: var(--gold);
        }

        .main-title {
            color: var(--gold);
            font-size: 1.4rem;
            font-weight: bold;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* زر الإعدادات */
        .settings-switcher {
            position: relative;
        }

        .settings-dot {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--gold), #ffaa00);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }

        .settings-dot:hover {
            transform: scale(1.1) rotate(30deg);
        }

        /* شريط التنقل السفلي */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 80px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            display: flex;
            justify-content: space-around;
            padding: 12px 10px;
            border-top: 2px solid var(--gold);
            z-index: 1000;
            box-shadow: 0 -4px 30px rgba(0, 0, 0, 0.2);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            font-size: 0.75rem;
            transition: var(--transition);
            padding: 10px 8px;
            border-radius: 15px;
            min-width: 65px;
            background: none;
            border: none;
            cursor: pointer;
        }

        .nav-item.active {
            color: var(--gold);
            background: rgba(212, 175, 55, 0.15);
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.2);
        }

        .nav-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
            transition: var(--transition);
        }

        .nav-item.active .nav-icon {
            transform: scale(1.2);
        }

        /* المحتوى */
        .page-content {
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        /* البطاقات */
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
        }

        .section-title {
            color: var(--gold);
            margin-top: 0;
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.5rem;
            position: relative;
            padding-bottom: 15px;
            font-weight: bold;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 50%;
            transform: translateX(50%);
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
        }

        /* شاشة تسجيل الدخول */
        .login-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px;
            text-align: center;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }

        .login-logo {
            font-size: 4.5rem;
            color: var(--gold);
            margin-bottom: 30px;
            text-shadow: 0 4px 20px rgba(212, 175, 55, 0.5);
        }

        .login-title {
            color: var(--gold);
            font-size: 2rem;
            margin-bottom: 15px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .login-input {
            width: 100%;
            max-width: 350px;
            padding: 18px;
            margin: 25px 0;
            border: 2px solid var(--gold);
            border-radius: 30px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1.1rem;
            text-align: center;
            outline: none;
            transition: var(--transition);
        }

        .login-input:focus {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }

        .login-btn {
            background: linear-gradient(45deg, var(--gold), #ffaa00);
            color: #000;
            border: none;
            padding: 18px 50px;
            border-radius: 30px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
        }

        .login-btn:active {
            transform: scale(0.95);
        }

        /* مستوى المستخدم */
        .level-card {
            margin: 25px 0;
            padding: 25px;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(212, 175, 55, 0.2));
            border-radius: 20px;
            border: 2px solid var(--gold);
            position: relative;
            overflow: hidden;
        }

        .level-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
        }

        .level-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .level-title {
            color: var(--gold);
            font-size: 1.4rem;
            font-weight: bold;
            margin: 0;
        }

        .level-number {
            background: var(--gold);
            color: #000;
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.3rem;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }

        .level-progress-container {
            margin: 20px 0;
        }

        .level-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 1rem;
            color: var(--gold);
            font-weight: 600;
        }

        .level-bar {
            height: 25px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            border: 1px solid rgba(212, 175, 55, 0.3);
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .level-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--gold), var(--accent));
            border-radius: 12px;
            transition: width 0.8s ease;
            position: relative;
            overflow: hidden;
        }

        .level-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.3) 50%, 
                transparent 100%);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* خانة المنبر الإسلامي */
        .minbar-card {
            margin: 25px 0;
            padding: 25px;
            background: linear-gradient(135deg, rgba(0, 100, 200, 0.1), rgba(0, 150, 255, 0.2));
            border-radius: 20px;
            border: 2px solid #4dabf7;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
        }

        .minbar-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(77, 171, 247, 0.3);
        }

        .minbar-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, #4dabf7, transparent);
        }

        .minbar-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        .minbar-icon {
            font-size: 2.5rem;
            color: #4dabf7;
        }

        .minbar-title {
            color: #4dabf7;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0;
        }

        .minbar-desc {
            color: var(--text);
            font-size: 1.1rem;
            opacity: 0.9;
            margin: 0;
            text-align: center;
            line-height: 1.6;
        }

        /* قائمة الخيارات الداخلية */
        .internal-menu {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 25px 0;
        }

        .menu-item {
            background: rgba(212, 175, 55, 0.1);
            border: 2px solid var(--gold);
            border-radius: 20px;
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .menu-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .menu-item:hover::before {
            left: 100%;
        }

        .menu-item:active {
            transform: scale(0.98);
            background: rgba(212, 175, 55, 0.2);
        }

        .menu-icon {
            font-size: 2.2rem;
            color: var(--gold);
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            flex-shrink: 0;
            transition: var(--transition);
        }

        .menu-item:hover .menu-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .menu-content {
            flex: 1;
        }

        .menu-title {
            color: var(--gold);
            margin: 0 0 8px 0;
            font-size: 1.3rem;
            font-weight: bold;
        }

        .menu-desc {
            margin: 0;
            font-size: 1rem;
            opacity: 0.9;
        }

        /* صفحة المنبر الإسلامي */
        .minbar-page .sermons-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 25px 0;
        }

        .sermon-card {
            background: linear-gradient(135deg, rgba(0, 100, 200, 0.1), rgba(0, 150, 255, 0.2));
            border: 2px solid #4dabf7;
            border-radius: 20px;
            padding: 25px;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            text-align: right;
        }

        .sermon-card:hover {
            transform: translateX(-5px);
            background: rgba(0, 150, 255, 0.3);
        }

        .sermon-card:active {
            transform: scale(0.98);
        }

        .sermon-title {
            color: #4dabf7;
            font-size: 1.4rem;
            font-weight: bold;
            margin: 0 0 10px 0;
            text-align: right;
        }

        .sermon-sheikh {
            color: var(--text);
            font-size: 1.1rem;
            opacity: 0.9;
            margin: 0 0 15px 0;
            text-align: right;
        }

        .sermon-play {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            color: var(--gold);
            font-weight: bold;
            font-size: 1rem;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            margin-top: 10px;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        /* شاشة الصلاة */
        .prayer-grid {
            display: grid;
            grid-template-columns: 1fr repeat(3, 1fr);
            gap: 15px;
            padding: 20px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            align-items: center;
        }

        .prayer-grid.header {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(212, 175, 55, 0.2));
            border-radius: 15px;
            padding: 20px 15px;
            font-weight: bold;
            color: var(--gold);
            margin-bottom: 10px;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        .prayer-name {
            text-align: right;
            font-weight: 600;
            color: var(--gold);
            font-size: 1.2rem;
            padding: 12px 0;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 12px;
        }

        .prayer-icon {
            font-size: 1.6rem;
            opacity: 0.9;
        }

        .prayer-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: 2px solid var(--gold);
            background: rgba(212, 175, 55, 0.1);
            color: rgba(255, 255, 255, 0.5);
            font-size: 1.4rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            transition: var(--transition);
        }

        .prayer-btn.active {
            background: var(--gold);
            color: #000;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
            transform: scale(1.1);
        }

        /* شاشة الأذكار */
        .azkar-container {
            text-align: center;
        }

        .azkar-text {
            font-size: 1.4rem;
            line-height: 2;
            padding: 30px 25px;
            background: rgba(0, 0, 0, 0.15);
            border-radius: 20px;
            margin: 25px 0;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-right: 4px solid var(--gold);
            box-shadow: inset 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        .azkar-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 25px;
        }

        /* شاشة التسبيح */
        .tasbeeh-count {
            font-size: 5rem;
            color: var(--gold);
            font-weight: bold;
            margin: 25px 0;
            font-family: 'Courier New', monospace;
            text-align: center;
            text-shadow: 0 4px 20px rgba(212, 175, 55, 0.5);
        }

        .tasbeeh-circle {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            border: 4px solid var(--gold);
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(212, 175, 55, 0.3));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            cursor: pointer;
            transition: var(--transition);
            user-select: none;
            box-shadow: 0 10px 40px rgba(212, 175, 55, 0.2);
            position: relative;
            overflow: hidden;
        }

        .tasbeeh-circle::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, transparent 30%, rgba(212, 175, 55, 0.1) 70%);
            transition: var(--transition);
        }

        .tasbeeh-circle:active {
            transform: scale(0.95);
            box-shadow: 0 5px 20px rgba(212, 175, 55, 0.3);
        }

        .tasbeeh-text {
            color: var(--gold);
            font-size: 1.4rem;
            font-weight: bold;
            position: relative;
            z-index: 1;
        }

        /* شاشة الأحاديث */
        .hadith-container {
            text-align: center;
        }

        .hadith-text {
            font-size: 1.3rem;
            line-height: 2;
            padding: 30px 25px;
            background: rgba(0, 0, 0, 0.15);
            border-radius: 20px;
            margin: 25px 0;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-right: 4px solid var(--gold);
            box-shadow: inset 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        /* شاشة كيفية الوضوء */
        .wudu-container {
            text-align: center;
        }

        .wudu-steps {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 25px 0;
        }

        .wudu-step {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(212, 175, 55, 0.1));
            border: 2px solid var(--gold);
            border-radius: 20px;
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
            text-align: right;
            transition: var(--transition);
        }

        .wudu-step:hover {
            transform: translateX(-5px);
        }

        .wudu-step-number {
            width: 45px;
            height: 45px;
            background: linear-gradient(45deg, var(--gold), #ffaa00);
            color: #000;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.3rem;
            flex-shrink: 0;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }

        .wudu-step-text {
            flex: 1;
            color: var(--text);
            font-size: 1.2rem;
            line-height: 1.6;
        }

        /* شاشة القرآن */
        .quran-container {
            text-align: center;
        }

        .reciters-container {
            display: flex;
            flex-direction: column;
            gap: 25px;
            margin: 25px 0;
        }

        .reciter-card {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(212, 175, 55, 0.2));
            border: 2px solid var(--gold);
            border-radius: 20px;
            padding: 25px;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .reciter-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
        }

        .reciter-card:active {
            transform: scale(0.98);
        }

        .reciter-title {
            color: var(--gold);
            text-align: center;
            font-size: 1.4rem;
            margin-bottom: 12px;
            font-weight: bold;
        }

        .quran-surahs {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        @media (max-width: 480px) {
            .quran-surahs {
                grid-template-columns: 1fr;
            }
        }

        .surah-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(212, 175, 55, 0.1));
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }

        .surah-card:active {
            transform: scale(0.98);
        }

        .surah-title {
            color: var(--gold);
            font-size: 1.2rem;
            font-weight: bold;
            margin: 0 0 8px 0;
        }

        .surah-desc {
            color: var(--text);
            font-size: 0.9rem;
            opacity: 0.8;
            margin: 0;
        }

        /* شاشة المهام */
        .tasks-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 25px 0;
            position: relative;
        }

        .add-task-btn {
            position: fixed;
            bottom: 110px;
            left: 25px;
            width: 65px;
            height: 65px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--gold), #ffaa00);
            color: #000;
            border: none;
            font-size: 2.2rem;
            cursor: pointer;
            box-shadow: 0 8px 30px rgba(212, 175, 55, 0.4);
            z-index: 999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .add-task-btn:active {
            transform: scale(0.95);
        }

        .task-item {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(212, 175, 55, 0.1));
            border: 2px solid var(--gold);
            border-radius: 20px;
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
            position: relative;
            transition: var(--transition);
        }

        .task-item:hover {
            transform: translateX(-5px);
        }

        .user-task-item {
            background: linear-gradient(135deg, rgba(0, 200, 255, 0.1), rgba(0, 150, 255, 0.2));
            border: 2px solid #00aaff;
        }

        .task-checkbox {
            width: 35px;
            height: 35px;
            border: 2px solid var(--gold);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.05);
        }

        .user-task-item .task-checkbox {
            border-color: #00aaff;
        }

        .task-checkbox.checked {
            background: var(--gold);
        }

        .user-task-item .task-checkbox.checked {
            background: #00aaff;
        }

        .task-checkbox.checked::after {
            content: '✓';
            color: #000;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .task-content {
            flex: 1;
        }

        .task-title {
            color: var(--gold);
            margin: 0 0 8px 0;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .user-task-item .task-title {
            color: #00aaff;
        }

        .task-desc {
            margin: 0;
            font-size: 1rem;
            opacity: 0.9;
            line-height: 1.5;
        }

        .task-points {
            color: var(--gold);
            font-weight: bold;
            font-size: 1.2rem;
            padding: 8px 18px;
            background: rgba(212, 175, 55, 0.15);
            border-radius: 15px;
            flex-shrink: 0;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.2);
        }

        .user-task-item .task-points {
            color: #00aaff;
            background: rgba(0, 200, 255, 0.15);
        }

        .task-actions {
            display: flex;
            gap: 10px;
        }

        .task-action-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.3);
            color: var(--gold);
            width: 40px;
            height: 40px;
            border-radius: 10px;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .task-action-btn:hover {
            background: rgba(212, 175, 55, 0.2);
            transform: scale(1.1);
        }

        /* الأزرار العامة */
        .action-btn {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(212, 175, 55, 0.2));
            border: 2px solid var(--gold);
            color: var(--gold);
            padding: 15px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.2);
        }

        .action-btn:active {
            transform: scale(0.95);
        }

        /* شريط التقدم */
        .progress-bar {
            height: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            overflow: hidden;
            margin: 12px 0;
            border: 1px solid rgba(212, 175, 55, 0.3);
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--gold), var(--accent));
            border-radius: 8px;
            transition: width 0.5s ease;
            position: relative;
        }

        /* الإشعارات */
        .notification {
            position: fixed;
            bottom: 100px;
            right: 25px;
            background: linear-gradient(45deg, var(--gold), var(--accent));
            color: #000;
            padding: 18px 30px;
            border-radius: 15px;
            animation: slideIn 0.3s;
            z-index: 1000;
            font-weight: bold;
            box-shadow: 0 8px 30px rgba(212, 175, 55, 0.3);
            max-width: 350px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* خطوط زخرفية */
        .decorative-line {
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
            margin: 20px 0;
            border-radius: 2px;
        }

        /* معلومات اليوم */
        .today-date {
            text-align: center;
            color: var(--gold);
            font-size: 1.1rem;
            margin-bottom: 20px;
            font-weight: bold;
            padding: 12px 20px;
            background: rgba(212, 175, 55, 0.15);
            border-radius: 15px;
            display: inline-block;
            border: 1px solid rgba(212, 175, 55, 0.3);
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.2);
        }

        /* صفحة الإعدادات */
        .settings-page-content {
            text-align: center;
        }

        .settings-option {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(212, 175, 55, 0.2));
            border: 2px solid var(--gold);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            cursor: pointer;
            transition: var(--transition);
            text-align: right;
            display: flex;
            align-items: center;
            gap: 20px;
            position: relative;
            overflow: hidden;
        }

        .settings-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .settings-option:hover::before {
            left: 100%;
        }

        .settings-option:active {
            transform: scale(0.98);
        }

        .settings-option-icon {
            font-size: 1.8rem;
            color: var(--gold);
            width: 55px;
            height: 55px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            flex-shrink: 0;
            transition: var(--transition);
        }

        .settings-option:hover .settings-option-icon {
            transform: scale(1.1) rotate(10deg);
        }

        .settings-option-content {
            flex: 1;
        }

        .settings-option-title {
            color: var(--gold);
            font-size: 1.3rem;
            font-weight: bold;
            margin: 0 0 8px 0;
            text-align: right;
        }

        .settings-option-desc {
            color: var(--text);
            font-size: 1rem;
            opacity: 0.9;
            margin: 0;
            text-align: right;
            line-height: 1.5;
        }

        /* نافذة تغيير الاسم */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            animation: fadeIn 0.3s;
        }

        .modal-content {
            background: var(--card-bg);
            border: 2px solid var(--gold);
            border-radius: 25px;
            padding: 35px;
            max-width: 450px;
            width: 90%;
            text-align: center;
            backdrop-filter: blur(20px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            animation: modalSlideIn 0.3s;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-title {
            color: var(--gold);
            font-size: 1.8rem;
            margin-bottom: 25px;
            font-weight: bold;
        }

        .modal-input {
            width: 100%;
            padding: 18px;
            margin: 25px 0;
            border: 2px solid var(--gold);
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
            font-size: 1.1rem;
            text-align: center;
            outline: none;
            transition: var(--transition);
        }

        .modal-input:focus {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }

        .modal-buttons {
            display: flex;
            gap: 20px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .modal-btn {
            flex: 1;
            min-width: 120px;
            padding: 15px 25px;
            border-radius: 20px;
            border: none;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .modal-btn:active {
            transform: scale(0.95);
        }

        .modal-btn-primary {
            background: linear-gradient(45deg, var(--gold), #ffaa00);
            color: #000;
        }

        .modal-btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
            border: 1px solid var(--gold);
        }

        .modal-btn-danger {
            background: linear-gradient(45deg, #ff4444, #ff6666);
            color: white;
        }

        .modal-btn-success {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
        }

        /* قائمة السمات */
        .theme-menu {
            position: absolute;
            top: 60px;
            left: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid var(--gold);
            border-radius: 15px;
            padding: 15px;
            z-index: 1001;
            display: none;
            width: 220px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            animation: fadeIn 0.2s;
        }

        .theme-menu.active {
            display: block;
        }

        .theme-option {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 8px;
        }

        .theme-option:hover {
            background: rgba(212, 175, 55, 0.15);
            transform: translateX(-5px);
        }

        .theme-preview {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            margin-left: 15px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .theme-name {
            font-size: 1rem;
            font-weight: 500;
        }

        /* صفحة المصادر */
        .sources-list {
            text-align: right;
            padding: 25px;
        }

        .source-item {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(212, 175, 55, 0.1));
            border: 1px solid var(--gold);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            transition: var(--transition);
        }

        .source-item:hover {
            background: rgba(212, 175, 55, 0.15);
            transform: translateX(-5px);
        }

        .source-title {
            color: var(--gold);
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .source-desc {
            color: var(--text);
            font-size: 1rem;
            opacity: 0.9;
            margin: 8px 0;
            line-height: 1.6;
        }

        .source-link {
            color: var(--accent);
            text-decoration: none;
            font-size: 1rem;
            display: inline-block;
            margin-top: 8px;
            font-weight: 500;
            transition: var(--transition);
        }

        .source-link:hover {
            text-decoration: underline;
        }

        /* مواقع أخرى */
        .other-sites-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 25px 0;
        }

        .site-card {
            background: linear-gradient(135deg, rgba(0, 100, 255, 0.1), rgba(0, 150, 255, 0.2));
            border: 2px solid #4dabf7;
            border-radius: 20px;
            padding: 25px;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .site-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, #4dabf7, transparent);
        }

        .site-card:active {
            transform: scale(0.98);
        }

        .site-title {
            color: #4dabf7;
            text-align: center;
            font-size: 1.4rem;
            margin-bottom: 12px;
            font-weight: bold;
        }

        .site-desc {
            color: var(--text);
            font-size: 1rem;
            opacity: 0.9;
            margin: 8px 0;
        }

        /* إصلاحات للشاشات الصغيرة */
        @media (max-width: 768px) {
            .page-content {
                padding: 15px;
            }
            
            .page {
                top: 60px;
                height: calc(100% - 140px);
            }
            
            .main-header {
                height: 60px;
                padding: 0 15px;
            }
            
            .user-avatar {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
            
            .main-title {
                font-size: 1.2rem;
            }
            
            .settings-dot {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
            
            .bottom-nav {
                height: 75px;
            }
            
            .nav-item {
                min-width: 60px;
                padding: 8px 5px;
            }
            
            .nav-icon {
                font-size: 1.3rem;
            }
            
            .card {
                padding: 20px;
            }
            
            .section-title {
                font-size: 1.3rem;
            }
            
            .login-logo {
                font-size: 4rem;
            }
            
            .login-title {
                font-size: 1.8rem;
            }
            
            .login-input {
                padding: 16px;
                max-width: 320px;
            }
            
            .level-card {
                padding: 20px;
            }
            
            .minbar-card {
                padding: 20px;
            }
            
            .minbar-icon {
                font-size: 2rem;
            }
            
            .menu-item {
                padding: 20px;
            }
            
            .menu-icon {
                font-size: 1.8rem;
                width: 50px;
                height: 50px;
            }
            
            .prayer-grid {
                grid-template-columns: 1fr repeat(3, 1fr);
                font-size: 0.9rem;
                gap: 10px;
                padding: 15px 0;
            }
            
            .prayer-btn {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
            
            .azkar-text {
                font-size: 1.2rem;
                padding: 25px 20px;
                min-height: 180px;
            }
            
            .tasbeeh-circle {
                width: 150px;
                height: 150px;
            }
            
            .tasbeeh-count {
                font-size: 4rem;
            }
            
            .notification {
                right: 15px;
                left: 15px;
                max-width: none;
                bottom: 90px;
            }
            
            .theme-menu {
                left: -160px;
                width: 200px;
            }
            
            .add-task-btn {
                bottom: 95px;
                left: 20px;
                width: 60px;
                height: 60px;
                font-size: 2rem;
            }
            
            .modal-content {
                padding: 25px;
            }
            
            .modal-buttons {
                flex-direction: column;
            }
            
            .modal-btn {
                min-width: 100%;
            }
        }

        @media (max-width: 480px) {
            .nav-item {
                font-size: 0.7rem;
                min-width: 55px;
            }
            
            .nav-icon {
                font-size: 1.2rem;
            }
            
            .wudu-step {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .theme-menu {
                left: -140px;
                width: 180px;
            }
            
            .surah-card {
                padding: 12px;
            }
            
            .sermon-card {
                padding: 20px;
            }
            
            .sermon-title {
                font-size: 1.2rem;
            }
            
            .add-task-btn {
                bottom: 90px;
                left: 15px;
                width: 55px;
                height: 55px;
                font-size: 1.8rem;
            }
            
            .modal-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- شاشة التحميل -->
    <div id="splash-screen">
        <div class="splash-logo">☪️</div>
        <div class="splash-title">الموقع الإسلامي الذكي</div>
        <div class="loading-spinner"></div>
    </div>

    <!-- شاشة تسجيل الدخول -->
    <div id="login-page" class="page active">
        <div class="login-page">
            <div class="login-logo">☪️</div>
            <h1 class="login-title">الموقع الإسلامي الذكي</h1>
            <div class="decorative-line"></div>
            <p style="margin: 25px 0; font-size: 1.1rem; opacity: 0.9;">أدخل اسمك لبدء رحلتك الإسلامية</p>
            <input type="text" id="username-input" class="login-input" placeholder="اسم المستخدم" maxlength="20">
            <br><br>
            <button class="login-btn" onclick="login()">بدء الاستخدام</button>
        </div>
    </div>

    <!-- الهيدر الرئيسي -->
    <div class="main-header" style="display: none;" id="main-header">
        <div class="user-info">
            <div class="user-avatar" id="user-avatar">م</div>
            <div>
                <div class="user-name" id="user-name"></div>
            </div>
        </div>
        <div class="main-title" id="page-main-title">الرئيسية</div>
        <div class="settings-switcher">
            <div class="settings-dot" onclick="showPage('settings-page')">⚙️</div>
        </div>
    </div>

    <!-- الصفحة الرئيسية -->
    <div id="home-page" class="page">
        <div class="page-content">
            <!-- التاريخ الهجري -->
            <div class="card">
                <h2 class="section-title" id="hijri-date">--</h2>
                <div style="text-align: center; font-size: 1rem; opacity: 0.9; margin-top: 10px;">
                    <span id="current-time">--:--</span>
                </div>
            </div>
            
            <!-- مستوى المستخدم -->
            <div class="card">
                <div class="level-card">
                    <div class="level-header">
                        <h3 class="level-title" id="level-name">المستوى 1</h3>
                        <div class="level-number" id="level-number">1</div>
                    </div>
                    
                    <div class="level-progress-container">
                        <div class="level-labels">
                            <span id="current-level-label">المستوى 1</span>
                            <span id="next-level-label">المستوى 2</span>
                        </div>
                        <div class="level-bar">
                            <div class="level-fill" id="level-progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="level-points">
                        <span id="current-points">0</span> / <span id="needed-points">1000</span> نقطة
                        <div class="level-points-value" id="points-percentage" style="margin-top: 10px; font-size: 1.2rem;">0%</div>
                    </div>
                </div>
            </div>

            <!-- خانة المنبر الإسلامي -->
            <div class="minbar-card" onclick="showPage('minbar-page')">
                <div class="minbar-header">
                    <div class="minbar-icon">🕌</div>
                    <div>
                        <h3 class="minbar-title">المنبر الإسلامي</h3>
                    </div>
                </div>
                <p class="minbar-desc">استمع إلى خطب إسلامية مؤثرة من كبار الشيوخ والدعاة</p>
            </div>

            <!-- نصيحة اليوم -->
            <div class="card">
                <h2 class="section-title">نصيحة اليوم</h2>
                <div class="decorative-line"></div>
                <p id="daily-tip" style="padding: 20px 0; text-align: center; font-size: 1.2rem; line-height: 1.8; margin: 0;">
                    حافظ على الصلاة في وقتها فهي أول ما يحاسب عليه العبد يوم القيامة
                </p>
            </div>
        </div>
    </div>

    <!-- صفحة المنبر الإسلامي -->
    <div id="minbar-page" class="page">
        <div class="page-content">
            <div class="card">
                <div class="minbar-container">
                    <h2 class="section-title">المنبر الإسلامي</h2>
                    <div class="decorative-line"></div>
                    <p style="text-align: center; color: var(--gold); margin-bottom: 25px; font-size: 1.1rem; opacity: 0.9;">اختر خطبة للاستماع إليها</p>
                    
                    <div class="sermons-container">
                        <div class="sermon-card" onclick="openSermon('https://youtu.be/TTlnoFztl6E?si=reEnEF3dTax04DS4')">
                            <div class="sermon-title">التوبة النصوحة</div>
                            <div class="sermon-sheikh">الشيخ أحمد النفيس</div>
                            <div class="sermon-play">▶️ تشغيل الخطبة</div>
                        </div>
                        
                        <div class="sermon-card" onclick="openSermon('https://youtu.be/AH7kbk9Smdk?si=1pGbIEhqhN_gS9DP')">
                            <div class="sermon-title">كيف يغير القرآن نفوسنا</div>
                            <div class="sermon-sheikh">الشيخ أحمد النفيس</div>
                            <div class="sermon-play">▶️ تشغيل الخطبة</div>
                        </div>
                        
                        <div class="sermon-card" onclick="openSermon('https://youtu.be/BV8JxZJZdIc?si=DONvdLkvKO0BNn7B')">
                            <div class="sermon-title">صفة النار</div>
                            <div class="sermon-sheikh">الشيخ أحمد النفيس</div>
                            <div class="sermon-play">▶️ تشغيل الخطبة</div>
                        </div>
                        
                        <div class="sermon-card" onclick="openSermon('https://youtu.be/Ceti5Xc_oI0?si=QhKsJNjdD0Hq5nnF')">
                            <div class="sermon-title">كيف كانت صلاتهم</div>
                            <div class="sermon-sheikh">الشيخ أحمد النفيس</div>
                            <div class="sermon-play">▶️ تشغيل الخطبة</div>
                        </div>
                        
                        <div class="sermon-card" onclick="openSermon('https://youtu.be/m-g98Rae79c?si=rKXLYSaiHTI_FLVW')">
                            <div class="sermon-title">متى نصر الله</div>
                            <div class="sermon-sheikh">الشيخ أحمد النفيس</div>
                            <div class="sermon-play">▶️ تشغيل الخطبة</div>
                        </div>
                        
                        <div class="sermon-card" onclick="openSermon('https://youtu.be/FpIE8dmOSbU?si=Ubs5XZZ7jGDoQr3I')">
                            <div class="sermon-title">"وقال ربكم ادعوني استجب لكم"</div>
                            <div class="sermon-sheikh">الشيخ ياسر الدوسري</div>
                            <div class="sermon-play">▶️ تشغيل الخطبة</div>
                        </div>
                        
                        <div class="sermon-card" onclick="openSermon('https://youtu.be/rjxrG2qVhYE?si=8Tp059Gnmzgb5T_5')">
                            <div class="sermon-title">مكارم الأخلاق</div>
                            <div class="sermon-sheikh">الشيخ ياسر الدوسري</div>
                            <div class="sermon-play">▶️ تشغيل الخطبة</div>
                        </div>
                        
                        <div class="sermon-card" onclick="openSermon('https://youtu.be/YJ3_i3K8xYo?si=bI8QHGrmBZUk-o3i')">
                            <div class="sermon-title">فضل متابعة النبي صلى الله عليه وسلم</div>
                            <div class="sermon-sheikh">الشيخ ياسر الدوسري</div>
                            <div class="sermon-play">▶️ تشغيل الخطبة</div>
                        </div>
                        
                        <div class="sermon-card" onclick="openSermon('https://youtu.be/4nbTOGAt1Aw?si=kordBnB64VBarWDJ')">
                            <div class="sermon-title">فضل الصلاة وأسرارها</div>
                            <div class="sermon-sheikh">الشيخ ياسر الدوسري</div>
                            <div class="sermon-play">▶️ تشغيل الخطبة</div>
                        </div>
                        
                        <div class="sermon-card" onclick="openSermon('https://youtu.be/ZFxasHPL2Co?si=5Li5sB9ZqVOLUQio')">
                            <div class="sermon-title">ظلم العباد</div>
                            <div class="sermon-sheikh">الشيخ عبدالرحمن السديس</div>
                            <div class="sermon-play">▶️ تشغيل الخطبة</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 25px;">
                        <button class="action-btn" onclick="showPage('home-page')">العودة إلى الرئيسية</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة الصلاة -->
    <div id="prayer-page" class="page">
        <div class="page-content">
            <div class="card">
                <h2 class="section-title">خيارات الصلاة</h2>
                <div class="decorative-line"></div>
                
                <div class="internal-menu">
                    <div class="menu-item" onclick="showPage('prayer-times-page')">
                        <div class="menu-icon">🕐</div>
                        <div class="menu-content">
                            <h3 class="menu-title">جدول الصلاة</h3>
                            <p class="menu-desc">متابعة صلواتك اليومية</p>
                        </div>
                    </div>
                    
                    <div class="menu-item" onclick="showPage('wudu-page')">
                        <div class="menu-icon">🚰</div>
                        <div class="menu-content">
                            <h3 class="menu-title">كيفية الوضوء</h3>
                            <p class="menu-desc">تعلم خطوات الوضوء الصحيح</p>
                        </div>
                    </div>
                    
                    <div class="menu-item" onclick="showPage('prayer-tips-page')">
                        <div class="menu-icon">💡</div>
                        <div class="menu-content">
                            <h3 class="menu-title">نصائح الصلاة</h3>
                            <p class="menu-desc">نصائح وأحكام متعلقة بالصلاة</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة جدول الصلاة -->
    <div id="prayer-times-page" class="page">
        <div class="page-content">
            <div class="card">
                <!-- تاريخ اليوم -->
                <div style="text-align: center; margin-bottom: 25px;">
                    <div class="today-date" id="today-date">اليوم: --/--/----</div>
                </div>
                
                <!-- جدول الصلاة المحدث -->
                <div class="prayer-grid header">
                    <div>الصلاة</div>
                    <div>الجماعة</div>
                    <div>المفرد</div>
                    <div>النوافل</div>
                </div>
                
                <div id="prayer-times">
                    <div class="prayer-grid">
                        <div class="prayer-name">
                            <span class="prayer-icon">🌅</span>
                            الفجر
                        </div>
                        <button class="prayer-btn" onclick="togglePrayerStar('الفجر', 0, 30, 'جماعة')">☆</button>
                        <button class="prayer-btn" onclick="togglePrayerStar('الفجر', 1, 20, 'مفرد')">☆</button>
                        <button class="prayer-btn" onclick="togglePrayerStar('الفجر', 2, 10, 'نوافل')">☆</button>
                    </div>
                    <div class="prayer-grid">
                        <div class="prayer-name">
                            <span class="prayer-icon">☀️</span>
                            الظهر
                        </div>
                        <button class="prayer-btn" onclick="togglePrayerStar('الظهر', 0, 30, 'جماعة')">☆</button>
                        <button class="prayer-btn" onclick="togglePrayerStar('الظهر', 1, 20, 'مفرد')">☆</button>
                        <button class="prayer-btn" onclick="togglePrayerStar('الظهر', 2, 10, 'نوافل')">☆</button>
                    </div>
                    <div class="prayer-grid">
                        <div class="prayer-name">
                            <span class="prayer-icon">⛅</span>
                            العصر
                        </div>
                        <button class="prayer-btn" onclick="togglePrayerStar('العصر', 0, 30, 'جماعة')">☆</button>
                        <button class="prayer-btn" onclick="togglePrayerStar('العصر', 1, 20, 'مفرد')">☆</button>
                        <button class="prayer-btn" onclick="togglePrayerStar('العصر', 2, 10, 'نوافل')">☆</button>
                    </div>
                    <div class="prayer-grid">
                        <div class="prayer-name">
                            <span class="prayer-icon">🌇</span>
                            المغرب
                        </div>
                        <button class="prayer-btn" onclick="togglePrayerStar('المغرب', 0, 30, 'جماعة')">☆</button>
                        <button class="prayer-btn" onclick="togglePrayerStar('المغرب', 1, 20, 'مفرد')">☆</button>
                        <button class="prayer-btn" onclick="togglePrayerStar('المغرب', 2, 10, 'نوافل')">☆</button>
                    </div>
                    <div class="prayer-grid">
                        <div class="prayer-name">
                            <span class="prayer-icon">🌙</span>
                            العشاء
                        </div>
                        <button class="prayer-btn" onclick="togglePrayerStar('العشاء', 0, 30, 'جماعة')">☆</button>
                        <button class="prayer-btn" onclick="togglePrayerStar('العشاء', 1, 20, 'مفرد')">☆</button>
                        <button class="prayer-btn" onclick="togglePrayerStar('العشاء', 2, 10, 'نوافل')">☆</button>
                    </div>
                </div>
                
                <!-- شريط التقدم -->
                <div style="background: rgba(0, 0, 0, 0.2); border-radius: 15px; padding: 25px; margin: 30px 0; border: 1px solid rgba(212, 175, 55, 0.3);">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                        <div>
                            <div style="font-weight: bold; color: var(--gold); font-size: 1.1rem;" id="progress-text">إنجاز اليوم: 0%</div>
                            <div style="font-size: 1rem; opacity: 0.9; color: var(--gold); margin-top: 5px;" id="progress-points">النقاط: 0</div>
                        </div>
                        <div style="font-size: 1.4rem; color: var(--gold); font-weight: bold;" id="progress-percent2">0%</div>
                    </div>
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                </div>
                
                <!-- زر تسجيل حضور اليوم -->
                <div style="text-align: center; margin-top: 25px;">
                    <button class="action-btn" onclick="markDay()" style="padding: 18px 35px; font-size: 1.2rem;">
                        تسجيل حضور اليوم
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة كيفية الوضوء -->
    <div id="wudu-page" class="page">
        <div class="page-content">
            <div class="card">
                <div class="wudu-container">
                    <h2 class="section-title">كيفية الوضوء الصحيح</h2>
                    <div class="decorative-line"></div>
                    
                    <div class="wudu-steps">
                        <div class="wudu-step">
                            <div class="wudu-step-number">١</div>
                            <div class="wudu-step-text">النية في القلب ثم قول "بسم الله"</div>
                        </div>
                        <div class="wudu-step">
                            <div class="wudu-step-number">٢</div>
                            <div class="wudu-step-text">غسل الكفين ثلاث مرات</div>
                        </div>
                        <div class="wudu-step">
                            <div class="wudu-step-number">٣</div>
                            <div class="wudu-step-text">المضمضة والاستنشاق ثلاث مرات</div>
                        </div>
                        <div class="wudu-step">
                            <div class="wudu-step-number">٤</div>
                            <div class="wudu-step-text">غسل الوجه ثلاث مرات</div>
                        </div>
                        <div class="wudu-step">
                            <div class="wudu-step-number">٥</div>
                            <div class="wudu-step-text">غسل اليدين إلى المرفقين ثلاث مرات</div>
                        </div>
                        <div class="wudu-step">
                            <div class="wudu-step-number">٦</div>
                            <div class="wudu-step-text">مسح الرأس مرة واحدة</div>
                        </div>
                        <div class="wudu-step">
                            <div class="wudu-step-number">٧</div>
                            <div class="wudu-step-text">غسل الرجلين إلى الكعبين ثلاث مرات</div>
                        </div>
                        <div class="wudu-step">
                            <div class="wudu-step-number">٨</div>
                            <div class="wudu-step-text">قول الشهادتين بعد الانتهاء</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 25px; color: var(--gold); padding: 20px; background: rgba(212, 175, 55, 0.1); border-radius: 15px; border: 1px solid rgba(212, 175, 55, 0.3);">
                        <p style="font-size: 1.2rem; margin: 0; line-height: 1.8;">"يَا أَيُّهَا الَّذِينَ آمَنُوا إِذَا قُمْتُمْ إِلَى الصَّلَاةِ فَاغْسِلُوا وُجُوهَكُمْ وَأَيْدِيَكُمْ إِلَى الْمَرَافِقِ وَامْسَحُوا بِرُءُوسِكُمْ وَأَرْجُلَكُمْ إِلَى الْكَعْبَيْنِ"</p>
                        <p style="font-size: 1rem; margin-top: 15px; opacity: 0.9;">سورة المائدة - الآية 6</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة نصائح الصلاة -->
    <div id="prayer-tips-page" class="page">
        <div class="page-content">
            <div class="card">
                <div class="hadith-container">
                    <h2 class="section-title">نصائح وأحكام الصلاة</h2>
                    <div class="decorative-line"></div>
                    
                    <div class="hadith-text" id="prayer-tip-text">
                        حافظ على الصلاة في وقتها، فإنها أول ما يحاسب عليه العبد يوم القيامة
                    </div>
                    
                    <div class="azkar-controls">
                        <button class="action-btn" onclick="prevPrayerTip()">السابق</button>
                        <button class="action-btn" onclick="nextPrayerTip()">التالي</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة الأذكار -->
    <div id="azkar-page" class="page">
        <div class="page-content">
            <div class="card">
                <h2 class="section-title">خيارات الأذكار</h2>
                <div class="decorative-line"></div>
                
                <div class="internal-menu">
                    <div class="menu-item" onclick="showPage('morning-azkar-page')">
                        <div class="menu-icon">🌅</div>
                        <div class="menu-content">
                            <h3 class="menu-title">أذكار الصباح</h3>
                            <p class="menu-desc">أذكار وأذكار الصباح</p>
                        </div>
                    </div>
                    
                    <div class="menu-item" onclick="showPage('evening-azkar-page')">
                        <div class="menu-icon">🌇</div>
                        <div class="menu-content">
                            <h3 class="menu-title">أذكار المساء</h3>
                            <p class="menu-desc">أذكار وأذكار المساء</p>
                        </div>
                    </div>
                    
                    <div class="menu-item" onclick="showPage('sleep-azkar-page')">
                        <div class="menu-icon">🌙</div>
                        <div class="menu-content">
                            <h3 class="menu-title">أذكار النوم</h3>
                            <p class="menu-desc">أذكار وأذكار قبل النوم</p>
                        </div>
                    </div>
                    
                    <div class="menu-item" onclick="showPage('wakeup-azkar-page')">
                        <div class="menu-icon">⏰</div>
                        <div class="menu-content">
                            <h3 class="menu-title">أذكار الاستيقاظ</h3>
                            <p class="menu-desc">أذكار وأذكار بعد الاستيقاظ</p>
                        </div>
                    </div>
                    
                    <div class="menu-item" onclick="showPage('mosque-azkar-page')">
                        <div class="menu-icon">🕌</div>
                        <div class="menu-content">
                            <h3 class="menu-title">أذكار المسجد</h3>
                            <p class="menu-desc">أذكار دخول وخروج المسجد</p>
                        </div>
                    </div>
                    
                    <div class="menu-item" onclick="showPage('after-prayer-azkar-page')">
                        <div class="menu-icon">🙏</div>
                        <div class="menu-content">
                            <h3 class="menu-title">أذكار بعد الصلاة</h3>
                            <p class="menu-desc">أذكار وأذكار بعد الصلوات</p>
                        </div>
                    </div>
                    
                    <div class="menu-item" onclick="showPage('hadith-page')">
                        <div class="menu-icon">📜</div>
                        <div class="menu-content">
                            <h3 class="menu-title">أحاديث نبوية</h3>
                            <p class="menu-desc">أحاديث شريفة مختارة</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة أذكار الصباح -->
    <div id="morning-azkar-page" class="page">
        <div class="page-content">
            <div class="card">
                <div class="azkar-container">
                    <h2 class="section-title">أذكار الصباح</h2>
                    <div class="decorative-line"></div>
                    <div style="color: var(--gold); margin-bottom: 20px; font-weight: bold; font-size: 1.1rem;" id="morning-counter">١ من ٧</div>
                    
                    <div class="azkar-text" id="morning-text"></div>
                    
                    <div class="azkar-controls">
                        <button class="action-btn" onclick="prevMorningAzkar()">السابق</button>
                        <button class="action-btn" onclick="nextMorningAzkar()">التالي</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة أذكار المساء -->
    <div id="evening-azkar-page" class="page">
        <div class="page-content">
            <div class="card">
                <div class="azkar-container">
                    <h2 class="section-title">أذكار المساء</h2>
                    <div class="decorative-line"></div>
                    <div style="color: var(--gold); margin-bottom: 20px; font-weight: bold; font-size: 1.1rem;" id="evening-counter">١ من ٧</div>
                    
                    <div class="azkar-text" id="evening-text"></div>
                    
                    <div class="azkar-controls">
                        <button class="action-btn" onclick="prevEveningAzkar()">السابق</button>
                        <button class="action-btn" onclick="nextEveningAzkar()">التالي</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة أذكار النوم -->
    <div id="sleep-azkar-page" class="page">
        <div class="page-content">
            <div class="card">
                <div class="azkar-container">
                    <h2 class="section-title">أذكار النوم</h2>
                    <div class="decorative-line"></div>
                    <div style="color: var(--gold); margin-bottom: 20px; font-weight: bold; font-size: 1.1rem;" id="sleep-counter">١ من ٥</div>
                    
                    <div class="azkar-text" id="sleep-text"></div>
                    
                    <div class="azkar-controls">
                        <button class="action-btn" onclick="prevSleepAzkar()">السابق</button>
                        <button class="action-btn" onclick="nextSleepAzkar()">التالي</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة أذكار الاستيقاظ -->
    <div id="wakeup-azkar-page" class="page">
        <div class="page-content">
            <div class="card">
                <div class="azkar-container">
                    <h2 class="section-title">أذكار الاستيقاظ</h2>
                    <div class="decorative-line"></div>
                    <div style="color: var(--gold); margin-bottom: 20px; font-weight: bold; font-size: 1.1rem;" id="wakeup-counter">١ من ٦</div>
                    
                    <div class="azkar-text" id="wakeup-text"></div>
                    
                    <div class="azkar-controls">
                        <button class="action-btn" onclick="prevWakeupAzkar()">السابق</button>
                        <button class="action-btn" onclick="nextWakeupAzkar()">التالي</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة أذكار المسجد -->
    <div id="mosque-azkar-page" class="page">
        <div class="page-content">
            <div class="card">
                <div class="azkar-container">
                    <h2 class="section-title">أذكار المسجد</h2>
                    <div class="decorative-line"></div>
                    <div style="color: var(--gold); margin-bottom: 20px; font-weight: bold; font-size: 1.1rem;" id="mosque-counter">١ من ٥</div>
                    
                    <div class="azkar-text" id="mosque-text"></div>
                    
                    <div class="azkar-controls">
                        <button class="action-btn" onclick="prevMosqueAzkar()">السابق</button>
                        <button class="action-btn" onclick="nextMosqueAzkar()">التالي</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة أذكار بعد الصلاة -->
    <div id="after-prayer-azkar-page" class="page">
        <div class="page-content">
            <div class="card">
                <div class="azkar-container">
                    <h2 class="section-title">أذكار بعد الصلاة</h2>
                    <div class="decorative-line"></div>
                    <div style="color: var(--gold); margin-bottom: 20px; font-weight: bold; font-size: 1.1rem;" id="after-prayer-counter">١ من ٧</div>
                    
                    <div class="azkar-text" id="after-prayer-text"></div>
                    
                    <div class="azkar-controls">
                        <button class="action-btn" onclick="prevAfterPrayerAzkar()">السابق</button>
                        <button class="action-btn" onclick="nextAfterPrayerAzkar()">التالي</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة الأحاديث -->
    <div id="hadith-page" class="page">
        <div class="page-content">
            <div class="card">
                <div class="hadith-container">
                    <h2 class="section-title">أحاديث نبوية</h2>
                    <div class="decorative-line"></div>
                    <div class="quran-info" id="hadith-info" style="color: var(--gold); font-size: 1.1rem; margin-bottom: 20px;">صحيح البخاري</div>
                    
                    <div class="hadith-text" id="hadith-text">
                        قال رسول الله صلى الله عليه وسلم: "من صلى البردين دخل الجنة". والبردان: الفجر والعصر.
                    </div>
                    
                    <div class="azkar-controls">
                        <button class="action-btn" onclick="prevHadith()">السابق</button>
                        <button class="action-btn" onclick="nextHadith()">التالي</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة القرآن -->
    <div id="quran-page" class="page">
        <div class="page-content">
            <div class="card">
                <div class="quran-container">
                    <h2 class="section-title">القرآن الكريم</h2>
                    <div class="decorative-line"></div>
                    <p style="text-align: center; color: var(--gold); margin-bottom: 25px; font-size: 1.1rem; opacity: 0.9;">استمع إلى تلاوات قرآنية بصوت الشيوخ</p>
                    
                    <!-- قائمة أسماء الشيوخ -->
                    <div class="reciters-container" id="reciters-list">
                        <div class="reciter-card" onclick="showSheikhSurahs('ahmad-al-nafees')">
                            <div class="reciter-title">الشيخ أحمد النفيس</div>
                            <div class="reciter-desc" style="text-align: center; font-size: 1rem; opacity: 0.9;">اضغط لعرض السور</div>
                        </div>
                        
                        <div class="reciter-card" onclick="showSheikhSurahs('yaser-al-dosari')">
                            <div class="reciter-title">الشيخ ياسر الدوسري</div>
                            <div class="reciter-desc" style="text-align: center; font-size: 1rem; opacity: 0.9;">اضغط لعرض السور</div>
                        </div>
                        
                        <div class="reciter-card" onclick="showSheikhSurahs('mishari-al-afasy')">
                            <div class="reciter-title">الشيخ مشاري العفاسي</div>
                            <div class="reciter-desc" style="text-align: center; font-size: 1rem; opacity: 0.9;">اضغط لعرض السور</div>
                        </div>
                        
                        <div class="reciter-card" onclick="showSheikhSurahs('wadee-al-yamani')">
                            <div class="reciter-title">الشيخ وديع اليمني</div>
                            <div class="reciter-desc" style="text-align: center; font-size: 1rem; opacity: 0.9;">اضغط لعرض السور</div>
                        </div>
                        
                        <div class="reciter-card" onclick="showSheikhSurahs('al-minshawi')">
                            <div class="reciter-title">الشيخ المنشاوي</div>
                            <div class="reciter-desc" style="text-align: center; font-size: 1rem; opacity: 0.9;">اضغط لعرض السور</div>
                        </div>
                        
                        <div class="reciter-card" onclick="showSheikhSurahs('fares-abbad')">
                            <div class="reciter-title">الشيخ فارس عباد</div>
                            <div class="reciter-desc" style="text-align: center; font-size: 1rem; opacity: 0.9;">اضغط لعرض السور</div>
                        </div>
                        
                        <div class="reciter-card" onclick="showSheikhSurahs('abdulrahman-al-sudais')">
                            <div class="reciter-title">الشيخ عبدالرحمن السديس</div>
                            <div class="reciter-desc" style="text-align: center; font-size: 1rem; opacity: 0.9;">اضغط لعرض السور</div>
                        </div>
                    </div>
                    
                    <!-- قائمة السور تظهر عند اختيار الشيخ -->
                    <div id="surahs-container" style="display: none; margin-top: 35px;">
                        <div class="section-title" id="sheikh-name"></div>
                        <div class="decorative-line"></div>
                        <div class="quran-surahs" id="surahs-list">
                            <!-- السور ستظهر هنا عبر JavaScript -->
                        </div>
                        <div style="text-align: center; margin-top: 25px;">
                            <button class="action-btn" onclick="showRecitersList()">العودة إلى قائمة الشيوخ</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة التسبيح -->
    <div id="tasbeeh-page" class="page">
        <div class="page-content">
            <div class="card">
                <div class="azkar-container">
                    <h2 class="section-title">عداد التسبيح</h2>
                    <div class="decorative-line"></div>
                    
                    <div class="tasbeeh-count" id="tasbeeh-count">0</div>
                    
                    <div class="tasbeeh-circle" onclick="addTasbeeh(1)">
                        <div class="tasbeeh-text">اضغط هنا</div>
                    </div>
                    
                    <div style="margin: 30px 0; text-align: center;">
                        <button class="action-btn" onclick="resetTasbeeh()" style="margin: 0 10px; padding: 15px 25px;">تصفير</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة المهام -->
    <div id="tasks-page" class="page">
        <div class="page-content">
            <div class="card">
                <h2 class="section-title">مهام اليوم</h2>
                <div class="decorative-line"></div>
                <p style="text-align: center; color: var(--gold); margin-bottom: 25px; font-size: 1.1rem; opacity: 0.9;">أكمل المهام لتحصل على نقاط إضافية</p>
                
                <div class="tasks-container" id="daily-tasks">
                    <!-- المهام ستُضاف هنا عبر JavaScript -->
                </div>
                
                <!-- زر إضافة مهمة -->
                <button class="add-task-btn" onclick="showAddTaskModal()">+</button>
            </div>
        </div>
    </div>

    <!-- صفحة الإعدادات -->
    <div id="settings-page" class="page">
        <div class="page-content">
            <div class="card">
                <div class="settings-page-content">
                    <h2 class="section-title">الإعدادات</h2>
                    <div class="decorative-line"></div>
                    
                    <!-- خانة تغيير الاسم -->
                    <div class="settings-option" onclick="showChangeNameModal()">
                        <div class="settings-option-icon">👤</div>
                        <div class="settings-option-content">
                            <h3 class="settings-option-title">تغيير الاسم</h3>
                            <p class="settings-option-desc">تغيير اسم المستخدم الخاص بك</p>
                        </div>
                    </div>
                    
                    <!-- خانة تغيير السمات -->
                    <div class="settings-option" onclick="showThemesMenu()">
                        <div class="settings-option-icon">🎨</div>
                        <div class="settings-option-content">
                            <h3 class="settings-option-title">السمات</h3>
                            <p class="settings-option-desc">تغيير مظهر التطبيق</p>
                        </div>
                    </div>
                    
                    <!-- خانة مواقع أخرى -->
                    <div class="settings-option" onclick="showPage('other-sites-page')">
                        <div class="settings-option-icon">🔗</div>
                        <div class="settings-option-content">
                            <h3 class="settings-option-title">مواقع أخرى</h3>
                            <p class="settings-option-desc">مواقع إسلامية مفيدة</p>
                        </div>
                    </div>
                    
                    <!-- خانة المصادر -->
                    <div class="settings-option" onclick="showPage('sources-page')">
                        <div class="settings-option-icon">📚</div>
                        <div class="settings-option-content">
                            <h3 class="settings-option-title">المصادر</h3>
                            <p class="settings-option-desc">المصادر الحقيقية للأذكار والآيات</p>
                        </div>
                    </div>
                    
                    <!-- خانة تصفير البيانات -->
                    <div class="settings-option" onclick="resetUserData()">
                        <div class="settings-option-icon">🔄</div>
                        <div class="settings-option-content">
                            <h3 class="settings-option-title">تصفير البيانات</h3>
                            <p class="settings-option-desc">إعادة تعيين النقاط والمستوى والبيانات</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة مواقع أخرى -->
    <div id="other-sites-page" class="page">
        <div class="page-content">
            <div class="card">
                <h2 class="section-title">مواقع إسلامية مفيدة</h2>
                <div class="decorative-line"></div>
                <p style="text-align: center; color: var(--gold); margin-bottom: 25px; font-size: 1.1rem; opacity: 0.9;">مواقع إسلامية مفيدة للاستزادة من العلم</p>
                
                <div class="other-sites-container">
                    <div class="site-card" onclick="openSite('https://tajweed.tech/')">
                        <div class="site-title">Tajweed.tech</div>
                        <div class="site-desc">موقع لتعليم أحكام التجويد والتلاوة الصحيحة للقرآن الكريم</div>
                    </div>
                    
                    <div class="site-card" onclick="openSite('https://duaa.mocha.app/')">
                        <div class="site-title">Duaa.mocha.app</div>
                        <div class="site-desc">موقع للأدعية المأثورة من القرآن والسنة النبوية</div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 25px;">
                    <button class="action-btn" onclick="showPage('settings-page')">العودة إلى الإعدادات</button>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة المصادر -->
    <div id="sources-page" class="page">
        <div class="page-content">
            <div class="card">
                <h2 class="section-title">المصادر</h2>
                <div class="decorative-line"></div>
                
                <div class="sources-list">
                    <div class="source-item">
                        <div class="source-title">الأذكار</div>
                        <div class="source-desc">مأخوذة من كتب الأذكار المعتمدة مثل "حصن المسلم" و"الكلم الطيب" وموقع islambook.com</div>
                    </div>
                    
                    <div class="source-item">
                        <div class="source-title">الأحاديث النبوية</div>
                        <div class="source-desc">من الصحيحين (البخاري ومسلم) وكتب السنن المعتمدة</div>
                    </div>
                    
                    <div class="source-item">
                        <div class="source-title">أحكام الوضوء والصلاة</div>
                        <div class="source-desc">من كتب الفقه المعتمدة مثل "فقه السنة" و"المغني"</div>
                    </div>
                    
                    <div class="source-item">
                        <div class="source-title">التفسير</div>
                        <div class="source-desc">تفسير ابن كثير وتفسير السعدي وتفسير الطبري</div>
                    </div>
                    
                    <div class="source-item">
                        <div class="source-title">التلاوات القرآنية</div>
                        <div class="source-desc">من القنوات الرسمية للشيوخ على يوتيوب</div>
                    </div>
                    
                    <div class="source-item">
                        <div class="source-title">الخطب الإسلامية</div>
                        <div class="source-desc">من القنوات الرسمية للشيوخ والدعاة على يوتيوب</div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 25px;">
                    <button class="action-btn" onclick="showPage('settings-page')">العودة إلى الإعدادات</button>
                </div>
            </div>
        </div>
    </div>

    <!-- شريط التنقل السفلي -->
    <div class="bottom-nav" style="display: none;" id="bottom-nav">
        <button class="nav-item active" onclick="showPage('home-page')">
            <span class="nav-icon">🏠</span>
            <span>الرئيسية</span>
        </button>
        <button class="nav-item" onclick="showPage('quran-page')">
            <span class="nav-icon">📖</span>
            <span>القرآن</span>
        </button>
        <button class="nav-item" onclick="showPage('prayer-page')">
            <span class="nav-icon">🕌</span>
            <span>الصلاة</span>
        </button>
        <button class="nav-item" onclick="showPage('azkar-page')">
            <span class="nav-icon">📿</span>
            <span>الأذكار</span>
        </button>
        <button class="nav-item" onclick="showPage('tasbeeh-page')">
            <span class="nav-icon">🧮</span>
            <span>التسبيح</span>
        </button>
        <button class="nav-item" onclick="showPage('tasks-page')">
            <span class="nav-icon">✅</span>
            <span>المهام</span>
        </button>
    </div>

    <!-- قائمة السمات -->
    <div class="theme-menu" id="theme-menu">
        <div class="theme-option" onclick="changeTheme('green')">
            <div class="theme-preview" style="background: #0b3d2e;"></div>
            <span class="theme-name">الأخضر الإسلامي</span>
        </div>
        <div class="theme-option" onclick="changeTheme('dark')">
            <div class="theme-preview" style="background: #0a1929;"></div>
            <span class="theme-name">المظهر المظلم</span>
        </div>
        <div class="theme-option" onclick="changeTheme('gold')">
            <div class="theme-preview" style="background: #3a2c0a;"></div>
            <span class="theme-name">الذهبي</span>
        </div>
        <div class="theme-option" onclick="changeTheme('navy')">
            <div class="theme-preview" style="background: #001f3f;"></div>
            <span class="theme-name">الكحلي</span>
        </div>
        <div class="theme-option" onclick="changeTheme('red')">
            <div class="theme-preview" style="background: #3b0000;"></div>
            <span class="theme-name">الأحمر الغامق</span>
        </div>
        <div class="theme-option" onclick="changeTheme('blue')">
            <div class="theme-preview" style="background: #003366;"></div>
            <span class="theme-name">الأزرق الهادئ</span>
        </div>
        <div class="theme-option" onclick="changeTheme('white')">
            <div class="theme-preview" style="background: #ffffff;"></div>
            <span class="theme-name">اللون الأبيض</span>
        </div>
        <div class="theme-option" onclick="changeTheme('orange')">
            <div class="theme-preview" style="background: #ff6b00;"></div>
            <span class="theme-name">البرتقالي</span>
        </div>
        <div class="theme-option" onclick="changeTheme('purple')">
            <div class="theme-preview" style="background: #4b0082;"></div>
            <span class="theme-name">البنفسجي</span>
        </div>
    </div>

    <!-- نافذة تغيير الاسم -->
    <div id="change-name-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2 class="modal-title">تغيير الاسم</h2>
            <div class="decorative-line"></div>
            <input type="text" id="new-name-input" class="modal-input" placeholder="أدخل الاسم الجديد" maxlength="20">
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-secondary" onclick="closeChangeNameModal()">إلغاء</button>
                <button class="modal-btn modal-btn-primary" onclick="saveNewName()">حفظ</button>
            </div>
        </div>
    </div>

    <!-- نافذة إضافة مهمة -->
    <div id="add-task-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2 class="modal-title">إضافة مهمة جديدة</h2>
            <div class="decorative-line"></div>
            <input type="text" id="task-title-input" class="modal-input" placeholder="عنوان المهمة" maxlength="50">
            <textarea id="task-desc-input" class="modal-input" placeholder="وصف المهمة (اختياري)" rows="3" maxlength="200" style="text-align: right; font-family: inherit; resize: none;"></textarea>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-secondary" onclick="closeAddTaskModal()">إلغاء</button>
                <button class="modal-btn modal-btn-primary" onclick="saveNewTask()">إضافة</button>
            </div>
        </div>
    </div>

    <!-- نافذة تعديل مهمة -->
    <div id="edit-task-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2 class="modal-title">تعديل المهمة</h2>
            <div class="decorative-line"></div>
            <input type="text" id="edit-task-title-input" class="modal-input" placeholder="عنوان المهمة" maxlength="50">
            <textarea id="edit-task-desc-input" class="modal-input" placeholder="وصف المهمة (اختياري)" rows="3" maxlength="200" style="text-align: right; font-family: inherit; resize: none;"></textarea>
            <input type="hidden" id="edit-task-id">
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-secondary" onclick="closeEditTaskModal()">إلغاء</button>
                <button class="modal-btn modal-btn-success" onclick="saveEditedTask()">حفظ التعديلات</button>
                <button class="modal-btn modal-btn-danger" onclick="deleteTask()">حذف المهمة</button>
                <button class="modal-btn modal-btn-primary" onclick="restoreTaskDefaults()" style="background: linear-gradient(45deg, #2196F3, #0d8bf2); margin-top: 10px;">إرجاع (للمهام النظامية)</button>
            </div>
        </div>
    </div>

    <!-- نافذة محو مهام الموقع -->
    <div id="clear-site-tasks-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2 class="modal-title">محو مهام الموقع</h2>
            <div class="decorative-line"></div>
            <p style="text-align: center; font-size: 1.1rem; margin: 20px 0; line-height: 1.6; color: var(--text);">
                هل أنت متأكد من رغبتك في محو جميع مهام الموقع النظامية؟<br>
                <span style="color: var(--gold); font-weight: bold;">هذا الإجراء سيمحو فقط المهام النظامية وليس مهامك الشخصية.</span>
            </p>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-secondary" onclick="closeClearSiteTasksModal()">إلغاء</button>
                <button class="modal-btn modal-btn-danger" onclick="clearSiteTasks()">محو مهام الموقع</button>
            </div>
        </div>
    </div>

    <script>
        // البيانات
        let userData = {
            username: '',
            points: 0,
            level: 1,
            days: 0,
            streak: 0,
            lastDay: '',
            prayerStars: {},
            todayPrayerStars: {},
            tasbeehCount: 0,
            currentMorningAzkar: 0,
            currentEveningAzkar: 0,
            currentWakeupAzkar: 0,
            currentMosqueAzkar: 0,
            currentAfterPrayerAzkar: 0,
            currentPrayerTip: 0,
            currentHadith: 0,
            currentSleepAzkar: 0,
            completedTasks: {},
            userTasks: [],
            theme: 'green',
            lastPrayerDay: '',
            lastTipDay: '',
            currentDailyTip: 0,
            systemTasks: []
        };

        // المهام اليومية المحدثة
        const dailyTasks = [
            { id: 'prayer_5', title: 'أكمل الصلوات الخمس', desc: 'صلِّ جميع الصلوات اليوم في وقتها', points: 100, category: 'prayer', type: 'system' },
            { id: 'quran_hizb', title: 'قراءة حزب من القرآن', desc: 'اقرأ حزباً من القرآن الكريم (20 صفحة)', points: 70, category: 'quran', type: 'system' },
            { id: 'morning_azkar', title: 'أذكار الصباح', desc: 'اقرأ أذكار الصباح كاملة', points: 30, category: 'azkar', type: 'system' },
            { id: 'evening_azkar', title: 'أذكار المساء', desc: 'اقرأ أذكار المساء كاملة', points: 30, category: 'azkar', type: 'system' },
            { id: 'sunnah', title: 'السنن والرواتب', desc: 'صلِّ السنن الرواتب اليومية', points: 50, category: 'prayer', type: 'system' },
            { id: 'parents', title: 'بر الوالدين', desc: 'اتصل بوالديك أو زرهما أو أحسن إليهما', points: 70, category: 'social', type: 'system' },
            { id: 'charity', title: 'الصدقة', desc: 'تصدق ولو بشيء بسيط', points: 50, category: 'social', type: 'system' }
        ];

        // نصائح يومية متنوعة
        const dailyTips = [
            "حافظ على الصلاة في وقتها فهي أول ما يحاسب عليه العبد يوم القيامة",
            "الاستغفار يمحو الذنوب ويرفع الدرجات ويجلب الرزق",
            "صلة الرحم تزيد في العمر وتوسع في الرزق وتدخل الجنة",
            "بر الوالدين من أحب الأعمال إلى الله تعالى بعد الصلاة",
            "الصدقة تطفئ غضب الرب وتدفع البلاء وتزيد في العمر",
            "طلب العلم فريضة على كل مسلم ومسلمة",
            "الذكر يطرد الشيطان ويرضي الرحمن ويجلب البركة",
            "حفظ اللسان من الفتن وأعظم أسباب النجاة",
            "الصبر على البلاء من علامات الإيمان الكامل",
            "التوكل على الله مع الأخذ بالأسباب من أعظم العبادات",
            "الرفق بالحيوان من أسباب مغفرة الذنوب",
            "إماطة الأذى عن الطريق صدقة",
            "تبسمك في وجه أخيك صدقة",
            "كلمة طيبة صدقة",
            "مساعدة المحتاج من أفضل القربات"
        ];

        // أذكار الصباح
        const morningAzkar = [
            "آية الكرسي (مرة): الله لا إله إلا هو الحي القيوم لا تأخذه سنة ولا نوم له ما في السماوات وما في الأرض من ذا الذي يشفع عنده إلا بإذنه يعلم ما بين أيديهم وما خلفهم ولا يحيطون بشيء من علمه إلا بما شاء وسع كرسيه السماوات والأرض ولا يؤوده حفظهما وهو العلي العظيم",
            "سورة الإخلاص (3 مرات): قل هو الله أحد، الله الصمد، لم يلد ولم يولد، ولم يكن له كفوا أحد",
            "سورة الفلق (3 مرات): قل أعوذ برب الفلق، من شر ما خلق، ومن شر غاسق إذا وقب، ومن شر النفاثات في العقد، ومن شر حاسد إذا حسد",
            "سورة الناس (3 مرات): قل أعوذ برب الناس، ملك الناس، إله الناس، من شر الوسواس الخناس، الذي يوسوس في صدور الناس، من الجنة والناس",
            "أصبحنا وأصبح الملك لله، والحمد لله، لا إله إلا الله وحده لا شريك له، له الملك وله الحمد وهو على كل شيء قدير",
            "اللهم بك أصبحنا، وبك أمسينا، وبك نحيا، وبك نموت، وإليك النشور",
            "رضيت بالله ربا، وبالإسلام دينا، وبمحمد صلى الله عليه وسلم نبيا ورسولا"
        ];

        // أذكار المساء
        const eveningAzkar = [
            "آية الكرسي (مرة): الله لا إله إلا هو الحي القيوم لا تأخذه سنة ولا نوم له ما في السماوات وما في الأرض من ذا الذي يشفع عنده إلا بإذنه يعلم ما بين أيديهم وما خلفهم ولا يحيطون بشيء من علمه إلا بما شاء وسع كرسيه السماوات والأرض ولا يؤوده حفظهما وهو العلي العظيم",
            "سورة الإخلاص (3 مرات): قل هو الله أحد، الله الصمد، لم يلد ولم يولد، ولم يكن له كفوا أحد",
            "سورة الفلق (3 مرات): قل أعوذ برب الفلق، من شر ما خلق، ومن شر غاسق إذا وقب، ومن شر النفاثات في العقد، ومن شر حاسد إذا حسد",
            "سورة الناس (3 مرات): قل أعوذ برب الناس، ملك الناس، إله الناس، من شر الوسواس الخناس، الذي يوسوس في صدور الناس، من الجنة والناس",
            "اللهم بك أمسينا، وبك أصبحنا، وبك نحيا، وبك نموت، وإليك المصير",
            "أمسينا وأمسى الملك لله، والحمد لله، لا إله إلا الله وحده لا شريك له، له الملك وله الحمد وهو على كل شيء قدير",
            "أعوذ بكلمات الله التامات من شر ما خلق"
        ];

        // أذكار النوم
        const sleepAzkar = [
            "بسم الله الواحد القهار، اللهم باسمك أموت وأحيا. اللهم إنك خلقت نفسي وأنت توفاها، لك مماتها ومحياها، إن أحييتها فاحفظها، وإن أمتها فاغفر لها، اللهم إني أسألك العافية.",
            "اللهم رب السماوات ورب الأرض ورب العرش العظيم، ربنا ورب كل شيء، فالق الحب والنوى، منزل التوراة والإنجيل والفرقان، أعوذ بك من شر كل شيء أنت آخذ بناصيته، اللهم أنت الأول فليس قبلك شيء، وأنت الآخر فليس بعدك شيء، وأنت الظاهر فليس فوقك شيء، وأنت الباطن فليس دونك شيء، اقض عنا الدين وأغننا من الفقر.",
            "باسم الله وضعت جنبي، اللهم اغفر لي ذنبي، وأخسئ شيطاني، وفك رهاني، واجعلني في الندي الأعلى.",
            "الحمد لله الذي أطعمنا وسقانا، وكفانا وآوانا، فكم ممن لا كافي له ولا مؤوي.",
            "اللهم عالم الغيب والشهادة، فاطر السماوات والأرض، رب كل شيء ومليكه، أشهد أن لا إله إلا أنت، أعوذ بك من شر نفسي، ومن شر الشيطان وشركه، وأن أقترف على نفسي سوءاً، أو أجره إلى مسلم."
        ];

        // أذكار الاستيقاظ
        const wakeupAzkar = [
            "الحمد لله الذي أحيانا بعد ما أماتنا وإليه النشور. الحمد لله الذي رد علي روحي وعافاني في جسدي وأذن لي بذكره.",
            "لا إله إلا الله وحده لا شريك له، له الملك وله الحمد وهو على كل شيء قدير، سبحان الله والحمد لله ولا إله إلا الله والله أكبر ولا حول ولا قوة إلا بالله العلي العظيم.",
            "أصبحنا على فطرة الإسلام وكلمة الإخصاص ودين نبينا محمد صلى الله عليه وسلم وملة أبينا إبراهيم حنيفاً مسلماً وما كان من المشركين.",
            "اللهم بك أصبحنا وبك أمسينا وبك نحيا وبك نموت وإليك المصير. اللهم إني أصبحت أشهدك وأشهد حملة عرشك وملائكتك وجميع خلقك أنك أنت الله لا إله إلا أنت وأن محمداً عبدك ورسولك.",
            "اللهم ما أصبح بي من نعمة أو بأحد من خلقك فمنك وحدك لا شريك لك فلك الحمد ولك الشكر.",
            "رضيت بالله رباً وبالإسلام ديناً وبمحمد صلى الله عليه وسلم نبياً ورسولاً."
        ];

        // أذكار المسجد
        const mosqueAzkar = [
            "أعوذ بالله العظيم وبوجهه الكريم وسلطانه القديم من الشيطان الرجيم. بسم الله والحمد لله، اللهم صل على محمد وعلى آل محمد، اللهم اغفر لي ذنوبي وافتح لي أبواب رحمتك.",
            "اللهم افتح لي أبواب رحمتك. (عند الدخول) اللهم إني أسألك من فضلك. (عند الخروج)",
            "سبحان الله والحمد لله ولا إله إلا الله والله أكبر ولا حول ولا قوة إلا بالله العلي العظيم، اللهم اغفر لي ذنوبي وافتح لي أبواب فضلك.",
            "اللهم اجعل في قلبي نوراً وفي لساني نوراً وفي بصري نوراً وفي سمعي نوراً وعن يميني نوراً وعن يساري نوراً وفوقي نوراً وتحتي نوراً وأمامي نوراً وخلفي نوراً واجعل لي نوراً.",
            "اللهم إني أسألك من خير ما في هذا المسجد وخير ما حوله، وأعوذ بك من شر ما في هذا المسجد وشر ما حوله."
        ];

        // أذكار بعد الصلاة
        const afterPrayerAzkar = [
            "أستغفر الله، أستغفر الله، أستغفر الله. اللهم أنت السلام، ومنك السلام، تباركت يا ذا الجلال والإكرام.",
            "لا إله إلا الله وحده لا شريك له، له الملك وله الحمد وهو على كل شيء قدير. اللهم لا مانع لما أعطيت، ولا معطي لما منعت، ولا ينفع ذا الجد منك الجد.",
            "سبحان الله (33 مرة)، الحمد لله (33 مرة)، الله أكبر (33 مرة). لا إله إلا الله وحده لا شريك له، له الملك وله الحمد، وهو على كل شيء قدير.",
            "قراءة آية الكرسي: الله لا إله إلا هو الحي القيوم... (مرة واحدة بعد كل صلاة).",
            "بسم الله الرحمن الرحيم: قل هو الله أحد، الله الصمد، لم يلد ولم يولد، ولم يكن له كفوا أحد (3 مرات بعد صلاة الفجر والمغرب، مرة واحدة بعد الصلوات الأخرى).",
            "بسم الله الرحمن الرحيم: قل أعوذ برب الفلق، من شر ما خلق، ومن شر غاسق إذا وقب، ومن شر النفاثات في العقد، ومن شر حاسد إذا حسد (3 مرات بعد صلاة الفجر والمغرب، مرة واحدة بعد الصلوات الأخرى).",
            "بسم الله الرحمن الرحيم: قل أعوذ برب الناس، ملك الناس، إله الناس، من شر الوسواس الخناس، الذي يوسوس في صدور الناس، من الجنة والناس (3 مرات بعد صلاة الفجر والمغرب، مرة واحدة بعد الصلوات الأخرى).",
            "اللهم أعني على ذكرك وشكرك وحسن عبادتك. اللهم إني أسألك علماً نافعاً، ورزقاً طيباً، وعملاً متقبلاً.",
            "اللهم اجعلني من التوابين، واجعلني من المتطهرين، واجعلني من عبادك الصالحين.",
            "اللهم إنك عفو تحب العفو فاعف عني. اللهم إني أعوذ بك من العجز والكسل والجبن والبخل والهرم وعذاب القبر."
        ];

        // أحاديث نبوية
        const hadiths = [
            { text: "قال رسول الله صلى الله عليه وسلم: 'من صلى البردين دخل الجنة'. والبردان: الفجر والعصر.", info: "صحيح البخاري" },
            { text: "قال رسول الله صلى الله عليه وسلم: 'أول ما يحاسب عليه العبد يوم القيامة الصلاة، فإن صلحت صلح سائر عمله، وإن فسدت فسد سائر عمله'.", info: "الطبراني" },
            { text: "قال رسول الله صلى الله عليه وسلم: 'الصلاة نور'.", info: "صحيح مسلم" },
            { text: "قال رسول الله صلى الله عليه وسلم: 'استقيموا ولن تحصوا، واعلموا أن خير أعمالكم الصلاة، ولا يحافظ على الوضوء إلا مؤمن'.", info: "سنن ابن ماجه" },
            { text: "قال رسول الله صلى الله عليه وسلم: 'إن بين الرجل وبين الشرك والكفر ترك الصلاة'.", info: "صحيح مسلم" },
            { text: "قال رسول الله صلى الله عليه وسلم: 'ركعتا الفجر خير من الدنيا وما فيها'.", info: "صحيح مسلم" },
            { text: "قال رسول الله صلى الله عليه وسلم: 'صلوا كما رأيتموني أصلي'.", info: "صحيح البخاري" }
        ];

        // نصائح الصلاة
        const prayerTips = [
            "حافظ على الصلاة في وقتها فهي أول ما يحاسب عليه العبد يوم القيامة",
            "الخشوع في الصلاة من أسباب قبولها، فحاول أن تترك كل ما يشغلك أثناء الصلاة",
            "صلاة الجماعة تفضل صلاة المنفرد بسبع وعشرين درجة",
            "لا تنسى ذكر الله بعد الصلاة، فهو من أسباب مغفرة الذنوب",
            "صلاة النوافل تجبر نقص الصلاة المفروضة",
            "احرص على دعاء الاستفتاح في بداية الصلاة",
            "التأني والطمأنينة في الصلاة من أركانها"
        ];

        // بيانات الشيوخ والسور
        const sheikhsData = {
            'ahmad-al-nafees': {
                name: 'الشيخ أحمد النفيس',
                surahs: [
                    { title: 'سورة الفاتحة', url: 'https://youtube.com/shorts/hZwA9D2nDqM?si=R0CcddGvrY5lSZQz' },
                    { title: 'سورة البقرة', url: 'https://youtu.be/9HW7j9lZZTU?si=AGx5otPHL_rKOFo2' },
                    { title: 'سورة يس', url: 'https://youtu.be/sVL0vdNqPpw?si=UpOWDRTfnFKbA74a' },
                    { title: 'سورة الملك', url: 'https://youtu.be/Byyrubr7eqQ?si=kxxRel7fpYxphIzy' },
                    { title: 'سورة القيامة', url: 'https://youtu.be/WJ6OWeTTqtU?si=t0ugk-JvWmIF2vlA' },
                    { title: 'سورة الدخان', url: 'https://youtu.be/0nKqbDR_ya0?si=qGZEC5UtTYmH4Fda' },
                    { title: 'سورة الكهف', url: 'https://youtu.be/-Rvavu8vyEw?si=3O3C6ca-MNG4MNJD' },
                    { title: 'سورة الرحمن', url: 'https://youtu.be/3Tg-FhFeC6E?si=mQpm9DPKNtJfUrDH' }
                ]
            },
            'yaser-al-dosari': {
                name: 'الشيخ ياسر الدوسري',
                surahs: [
                    { title: 'سورة الفاتحة', url: 'https://youtube.com/shorts/MePQ7B0dNek?si=5vaWolGfhC2xrKk7' },
                    { title: 'سورة البقرة', url: 'https://youtu.be/P0uaLRO6V1U?si=XcetcB863O0eFasd' },
                    { title: 'سورة يس', url: 'https://youtu.be/yEAmNisPOzk?si=vWSHEjCVuYKfIYqM' },
                    { title: 'سورة الملك', url: 'https://youtu.be/Xg3dnwXfsBc?si=azQjnht91DhGOjCV' },
                    { title: 'سورة القيامة', url: 'https://youtu.be/Tj6M-QrsYWQ?si=VEnqhXTf1ox_4AQg' },
                    { title: 'سورة الدخان', url: 'https://youtu.be/zmarpXKqMno?si=hamfIPAh0ZwCKSgZ' },
                    { title: 'سورة الكهف', url: 'https://youtu.be/GYqzkR_AnKE?si=zcF1sltZGbEvA4Tk' },
                    { title: 'سورة الرحمن', url: 'https://youtu.be/93sadl36u6s?si=Sg2bPb11-zEuXDzy' }
                ]
            },
            'mishari-al-afasy': {
                name: 'الشيخ مشاري العفاسي',
                surahs: [
                    { title: 'سورة الفاتحة', url: 'https://youtu.be/pUb9EW770d0?si=oRaxURYbJWdZDeDl' },
                    { title: 'سورة البقرة', url: 'https://youtu.be/Y1M6hJHHrjM?si=nVu4jM1fFuCvINSp' },
                    { title: 'سورة يس', url: 'https://youtu.be/kFn64z09MWA?si=I4w2xXISrlMdYw2I' },
                    { title: 'سورة الملك', url: 'https://youtu.be/IDvV7Tvt8gM?si=_zzEnZ9OJ1z-OmXn' },
                    { title: 'سورة القيامة', url: 'https://youtu.be/PUec_OAAsuw?si=R8dA8s4v5fYqGyWl' },
                    { title: 'سورة الدخان', url: 'https://youtu.be/ZB2Vaea3U6c?si=nbnNy7p-oCX-oc1w' },
                    { title: 'سورة الكهف', url: 'https://youtu.be/fLHVCOLU_WI?si=56GqZZN9qQFJTCB2' },
                    { title: 'سورة الرحمن', url: 'https://youtu.be/dZTfXiPSZyE?si=Kavl4kRrhLGiLWPR' }
                ]
            },
            'wadee-al-yamani': {
                name: 'الشيخ وديع اليمني',
                surahs: [
                    { title: 'سورة الفاتحة', url: 'https://youtube.com/shorts/qWzAyszODe4?si=ZdpBZiZpJBcxzqsF' },
                    { title: 'سورة البقرة', url: 'https://youtu.be/oV8ZuycmnSA?si=sXrAOTDtC0CwzU9m' },
                    { title: 'سورة يس', url: 'https://youtu.be/O4_q50GxnSU?si=eUQrpz15I21MMZ__' },
                    { title: 'سورة الملك', url: 'https://youtu.be/ZhRXf6nSbpw?si=7DFLlKM_QMPUTH9F' },
                    { title: 'سورة القيامة', url: 'https://youtu.be/i1_Gbsu9IH8?si=YiOe553HSpG_PNxM' },
                    { title: 'سورة الدخان', url: 'https://youtu.be/EM0pLYUvdbA?si=bp6eP_-Qd0kOytku' },
                    { title: 'سورة الكهف', url: 'https://youtu.be/lQYNKmL0noU?si=hHMKfGYiN2Snh8FH' },
                    { title: 'سورة الرحمن', url: 'https://youtu.be/jmEIZdVKVcA?si=t64faP4fptd25WJ-' }
                ]
            },
            'al-minshawi': {
                name: 'الشيخ المنشاوي',
                surahs: [
                    { title: 'سورة الفاتحة', url: 'https://youtube.com/shorts/CvsQN-mlwxo?si=eJFx3jbug2ySAoQm' },
                    { title: 'سورة البقرة', url: 'https://youtu.be/y-NAlOnFC8Q?si=hpcXljVUK_sE34m7' },
                    { title: 'سورة يس', url: 'https://youtu.be/0dFMfvdPWWs?si=JB4B55id0FxhIN4F' },
                    { title: 'سورة الملك', url: 'https://youtu.be/KeEyZIab-ls?si=1jSw5oAl-amllJtP' },
                    { title: 'سورة القيامة', url: 'https://youtu.be/yJA709soIZU?si=z0IXIYVAgJm7hcuC' },
                    { title: 'سورة الدخان', url: 'https://youtu.be/W9iLEttC7JY?si=gGcY03kxU_-7QYu7' },
                    { title: 'سورة الكهف', url: 'https://youtu.be/6MItl7jFRU0?si=8jJ-PDV3HMtwpkYJ' },
                    { title: 'سورة الرحمن', url: 'https://youtu.be/qk7__8tEW7k?si=MvCkMubN3I9n6ynm' }
                ]
            },
            'fares-abbad': {
                name: 'الشيخ فارس عباد',
                surahs: [
                    { title: 'سورة الفاتحة', url: 'https://youtu.be/3DCJ56cqXFc?si=OAkEf2KVZCpWmQTC' },
                    { title: 'سورة البقرة', url: 'https://youtu.be/V9pB_j8thUs?si=HMFP607j3UIzB3g2' },
                    { title: 'سورة يس', url: 'https://youtu.be/gEXTojT9QZo?si=ct-mWJhEWY8JTYOq' },
                    { title: 'سورة الملك', url: 'https://youtu.be/Ngr967sqruw?si=lgqKasVohl466Te2' },
                    { title: 'سورة القيامة', url: 'https://youtu.be/04ZbB_JwajQ?si=EZAjk-VP2gbVdm2t' },
                    { title: 'سورة الدخان', url: 'https://youtu.be/53ykFDqvz1Q?si=qbQRNVzNq4vin1DV' },
                    { title: 'سورة الكهف', url: 'https://youtu.be/YemSpFfeIkM?si=SQF9defWx1g-SWcx' },
                    { title: 'سورة الرحمن', url: 'https://youtu.be/1CFODKmQKZQ?si=n3fEGZ5XAAx0jBYW' }
                ]
            },
            'abdulrahman-al-sudais': {
                name: 'الشيخ عبدالرحمن السديس',
                surahs: [
                    { title: 'سورة الفاتحة', url: 'https://youtu.be/m3EBoMovUg8?si=aVjobRK0ILolvKAG' },
                    { title: 'سورة البقرة', url: 'https://youtu.be/MspLXPfFzjg?si=VslU40oUh191AK-1' },
                    { title: 'سورة يس', url: 'https://youtu.be/YtIwAJn6J7s?si=oz95aMyngu0ANk7T' },
                    { title: 'سورة الملك', url: 'https://youtu.be/NYti96AJOFc?si=GtSbThmQ2tRa0X2B' },
                    { title: 'سورة القيامة', url: 'https://youtu.be/PyzTyTv85-M?si=85XZAFAFn8VsNnIM' },
                    { title: 'سورة الدخان', url: 'https://youtu.be/Ww-L6S4cESM?si=BeBH3GlZns5wfteX' },
                    { title: 'سورة الكهف', url: 'https://youtu.be/xB4JmhhouFQ?si=_sgz5GyiUht2b9bC' },
                    { title: 'سورة الرحمن', url: 'https://youtu.be/pdoAaIBv3cY?si=N9XxHGghx-d3xkpL' }
                ]
            }
        };

        // خطب المنبر الإسلامي
        const sermons = [
            { title: "التوبة النصوحة", sheikh: "الشيخ أحمد النفيس", url: "https://youtu.be/TTlnoFztl6E?si=reEnEF3dTax04DS4" },
            { title: "كيف يغير القرآن نفوسنا", sheikh: "الشيخ أحمد النفيس", url: "https://youtu.be/AH7kbk9Smdk?si=1pGbIEhqhN_gS9DP" },
            { title: "صفة النار", sheikh: "الشيخ أحمد النفيس", url: "https://youtu.be/BV8JxZJZdIc?si=DONvdLkvKO0BNn7B" },
            { title: "كيف كانت صلاتهم", sheikh: "الشيخ أحمد النفيس", url: "https://youtu.be/Ceti5Xc_oI0?si=QhKsJNjdD0Hq5nnF" },
            { title: "متى نصر الله", sheikh: "الشيخ أحمد النفيس", url: "https://youtu.be/m-g98Rae79c?si=rKXLYSaiHTI_FLVW" },
            { title: '"وقال ربكم ادعوني استجب لكم"', sheikh: "الشيخ ياسر الدوسري", url: "https://youtu.be/FpIE8dmOSbU?si=Ubs5XZZ7jGDoQr3I" },
            { title: "مكارم الأخلاق", sheikh: "الشيخ ياسر الدوسري", url: "https://youtu.be/rjxrG2qVhYE?si=8Tp059Gnmzgb5T_5" },
            { title: "فضل متابعة النبي صلى الله عليه وسلم", sheikh: "الشيخ ياسر الدوسري", url: "https://youtu.be/YJ3_i3K8xYo?si=bI8QHGrmBZUk-o3i" },
            { title: "فضل الصلاة وأسرارها", sheikh: "الشيخ ياسر الدوسري", url: "https://youtu.be/4nbTOGAt1Aw?si=kordBnB64VBarWDJ" },
            { title: "ظلم العباد", sheikh: "الشيخ عبدالرحمن السديس", url: "https://youtu.be/ZFxasHPL2Co?si=5Li5sB9ZqVOLUQio" }
        ];

        // متغيرات عامة
        let isLoggedIn = false;
        let currentPage = 'login-page';

        // التهيئة
        function initApp() {
            loadData();
            
            setTimeout(() => {
                document.getElementById('splash-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('splash-screen').style.display = 'none';
                    
                    if (userData.username) {
                        login();
                    } else {
                        showPage('login-page');
                    }
                    
                    updateHijriDate();
                    updateTime();
                    updateDailyTip();
                    updateMorningAzkar();
                    updateEveningAzkar();
                    updateWakeupAzkar();
                    updateMosqueAzkar();
                    updateAfterPrayerAzkar();
                    updateSleepAzkar();
                    updatePrayerTip();
                    updateHadith();
                    updateLevelDisplay();
                    
                    setInterval(updateTime, 60000);
                    setInterval(checkPrayerDayUpdate, 60000);
                }, 300);
            }, 2000);
            
            setupMobileFeatures();
            setInterval(updateHijriDate, 60 * 60 * 1000);
            setInterval(saveData, 60 * 1000);
        }

        function setupMobileFeatures() {
            let lastTouchEnd = 0;
            document.addEventListener('touchend', function(e) {
                const now = Date.now();
                if (now - lastTouchEnd <= 300) {
                    e.preventDefault();
                }
                lastTouchEnd = now;
            }, { passive: false });
            
            document.addEventListener('touchstart', function(e) {
                if (e.touches.length > 1) {
                    e.preventDefault();
                }
            }, { passive: false });
            
            if ('standalone' in navigator) {
                document.documentElement.style.height = '100%';
                document.body.style.height = '100%';
            }
        }

        function loadData() {
            try {
                const savedUser = localStorage.getItem('islamicApp_user');
                if (savedUser) {
                    const parsed = JSON.parse(savedUser);
                    userData = { ...userData, ...parsed };
                    checkPrayerDayUpdate();
                }
                
                const savedTheme = localStorage.getItem('islamicApp_theme') || 'green';
                userData.theme = savedTheme;
                changeTheme(savedTheme, true);
                
                // تحميل المهام النظامية
                if (!userData.systemTasks || userData.systemTasks.length === 0) {
                    userData.systemTasks = JSON.parse(JSON.stringify(dailyTasks));
                }
            } catch (e) {
                console.log('خطأ في تحميل البيانات:', e);
            }
        }

        function saveData() {
            try {
                localStorage.setItem('islamicApp_user', JSON.stringify(userData));
                localStorage.setItem('islamicApp_theme', userData.theme);
            } catch (e) {
                console.log('خطأ في حفظ البيانات:', e);
            }
        }

        // تحديث نصيحة اليوم
        function updateDailyTip() {
            const today = new Date();
            const todayStr = today.toDateString();
            
            if (userData.lastTipDay !== todayStr) {
                userData.currentDailyTip = Math.floor(Math.random() * dailyTips.length);
                userData.lastTipDay = todayStr;
                saveData();
            }
            
            const dailyTipElement = document.getElementById('daily-tip');
            if (dailyTipElement) {
                dailyTipElement.textContent = dailyTips[userData.currentDailyTip];
            }
        }

        // تحديث عرض المستوى
        function updateLevelDisplay() {
            const oldLevel = userData.level;
            userData.level = Math.floor(userData.points / 1000) + 1;
            
            if (userData.level > 10) {
                userData.level = 10;
            }
            
            const pointsInCurrentLevel = userData.points % 1000;
            const progressPercentage = (pointsInCurrentLevel / 1000) * 100;
            
            const levelNameElement = document.getElementById('level-name');
            const levelNumberElement = document.getElementById('level-number');
            const currentPointsElement = document.getElementById('current-points');
            const neededPointsElement = document.getElementById('needed-points');
            const pointsPercentageElement = document.getElementById('points-percentage');
            const progressFillElement = document.getElementById('level-progress-fill');
            const currentLevelLabel = document.getElementById('current-level-label');
            const nextLevelLabel = document.getElementById('next-level-label');
            const userAvatarElement = document.getElementById('user-avatar');
            
            if (levelNameElement) {
                levelNameElement.textContent = `المستوى ${userData.level}`;
            }
            
            if (levelNumberElement) {
                levelNumberElement.textContent = userData.level;
            }
            
            if (currentPointsElement) {
                currentPointsElement.textContent = pointsInCurrentLevel;
            }
            
            if (neededPointsElement) {
                neededPointsElement.textContent = 1000;
            }
            
            if (pointsPercentageElement) {
                pointsPercentageElement.textContent = `${Math.round(progressPercentage)}%`;
            }
            
            if (progressFillElement) {
                progressFillElement.style.width = `${progressPercentage}%`;
            }
            
            if (currentLevelLabel) {
                currentLevelLabel.textContent = `المستوى ${userData.level}`;
            }
            
            if (nextLevelLabel) {
                nextLevelLabel.textContent = `المستوى ${userData.level + 1}`;
            }
            
            if (userAvatarElement) {
                userAvatarElement.textContent = userData.level;
            }
            
            if (oldLevel < userData.level) {
                showNotification(`🎉 مبروك! لقد رقيت إلى المستوى ${userData.level}`);
            }
            
            saveData();
        }

        function checkPrayerDayUpdate() {
            const today = new Date();
            const todayStr = today.toDateString();
            
            if (userData.lastPrayerDay !== todayStr) {
                if (userData.lastPrayerDay && userData.todayPrayerStars) {
                    userData.prayerStars[userData.lastPrayerDay] = {
                        stars: { ...userData.todayPrayerStars },
                        points: calculateTodayPrayerPoints()
                    };
                }
                
                resetPrayerTableForNewDay();
                userData.lastPrayerDay = todayStr;
                updateTodayDate();
                showNotification('تم تجديد جدول الصلاة لليوم الجديد!');
                saveData();
            }
        }

        function resetPrayerTableForNewDay() {
            userData.todayPrayerStars = {
                'الفجر': [false, false, false],
                'الظهر': [false, false, false],
                'العصر': [false, false, false],
                'المغرب': [false, false, false],
                'العشاء': [false, false, false]
            };
            
            if (currentPage === 'prayer-times-page') {
                updatePrayerDisplay();
                updateDailyProgress();
            }
        }

        function calculateTodayPrayerPoints() {
            let totalPoints = 0;
            const prayerPoints = [30, 20, 10];
            
            Object.values(userData.todayPrayerStars || {}).forEach(stars => {
                if (stars && Array.isArray(stars)) {
                    stars.forEach((active, idx) => {
                        if (active) {
                            totalPoints += prayerPoints[idx];
                        }
                    });
                }
            });
            
            return totalPoints;
        }

        function updateTodayDate() {
            const today = new Date();
            const todayStr = today.toLocaleDateString('ar-SA');
            const todayElement = document.getElementById('today-date');
            
            if (todayElement) {
                todayElement.textContent = `اليوم: ${todayStr}`;
            }
        }

        function changeTheme(theme, initial = false) {
            userData.theme = theme;
            document.body.setAttribute('data-theme', theme);
            
            const themeColors = {
                green: '#0b3d2e',
                dark: '#0a1929',
                gold: '#3a2c0a',
                navy: '#001f3f',
                red: '#3b0000',
                blue: '#003366',
                white: '#ffffff',
                orange: '#ff6b00',
                purple: '#4b0082'
            };
            
            const metaThemeColor = document.querySelector('meta[name="theme-color"]');
            if (metaThemeColor) {
                metaThemeColor.setAttribute('content', themeColors[theme] || '#0b3d2e');
            }
            
            if (!initial) {
                saveData();
                showNotification('تم تغيير السمة');
                closeThemeMenu();
            }
        }

        function showThemesMenu() {
            const themeMenu = document.getElementById('theme-menu');
            if (themeMenu) {
                const rect = themeMenu.getBoundingClientRect();
                if (rect.left < 0) {
                    themeMenu.style.left = '0px';
                }
                themeMenu.classList.toggle('active');
            }
        }

        function closeThemeMenu() {
            const themeMenu = document.getElementById('theme-menu');
            if (themeMenu) {
                themeMenu.classList.remove('active');
            }
        }

        function showPage(pageId) {
            if (pageId === 'login-page' && isLoggedIn) {
                pageId = 'home-page';
            }
            
            if (pageId === 'home-page' && !isLoggedIn) {
                pageId = 'login-page';
            }
            
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            document.getElementById(pageId).classList.add('active');
            currentPage = pageId;
            closeThemeMenu();
            
            const pageTitles = {
                'home-page': 'الرئيسية',
                'minbar-page': 'المنبر الإسلامي',
                'quran-page': 'القرآن الكريم',
                'prayer-page': 'الصلاة',
                'prayer-times-page': 'جدول الصلاة',
                'wudu-page': 'كيفية الوضوء',
                'prayer-tips-page': 'نصائح الصلاة',
                'azkar-page': 'الأذكار',
                'morning-azkar-page': 'أذكار الصباح',
                'evening-azkar-page': 'أذكار المساء',
                'sleep-azkar-page': 'أذكار النوم',
                'wakeup-azkar-page': 'أذكار الاستيقاظ',
                'mosque-azkar-page': 'أذكار المسجد',
                'after-prayer-azkar-page': 'أذكار بعد الصلاة',
                'hadith-page': 'أحاديث نبوية',
                'tasbeeh-page': 'التسبيح',
                'tasks-page': 'المهام',
                'settings-page': 'الإعدادات',
                'other-sites-page': 'مواقع أخرى',
                'sources-page': 'المصادر'
            };
            
            const mainTitle = document.getElementById('page-main-title');
            if (mainTitle && pageTitles[pageId]) {
                mainTitle.textContent = pageTitles[pageId];
            }
            
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            switch(pageId) {
                case 'home-page':
                    updateDailyTip();
                    updateLevelDisplay();
                    updateTodayDate();
                    document.querySelector('.nav-item[onclick*="home-page"]').classList.add('active');
                    break;
                case 'minbar-page':
                    document.querySelector('.nav-item[onclick*="home-page"]').classList.add('active');
                    break;
                case 'quran-page':
                    document.querySelector('.nav-item[onclick*="quran-page"]').classList.add('active');
                    break;
                case 'prayer-page':
                case 'prayer-times-page':
                case 'wudu-page':
                case 'prayer-tips-page':
                    document.querySelector('.nav-item[onclick*="prayer-page"]').classList.add('active');
                    if (pageId === 'prayer-times-page') {
                        updatePrayerDisplay();
                        updateTodayDate();
                    }
                    if (pageId === 'prayer-tips-page') updatePrayerTip();
                    break;
                case 'azkar-page':
                case 'morning-azkar-page':
                case 'evening-azkar-page':
                case 'sleep-azkar-page':
                case 'wakeup-azkar-page':
                case 'mosque-azkar-page':
                case 'after-prayer-azkar-page':
                case 'hadith-page':
                    document.querySelector('.nav-item[onclick*="azkar-page"]').classList.add('active');
                    break;
                case 'tasbeeh-page':
                    document.getElementById('tasbeeh-count').textContent = userData.tasbeehCount;
                    document.querySelector('.nav-item[onclick*="tasbeeh-page"]').classList.add('active');
                    break;
                case 'tasks-page':
                    updateTasksDisplay();
                    document.querySelector('.nav-item[onclick*="tasks-page"]').classList.add('active');
                    break;
                case 'settings-page':
                case 'other-sites-page':
                case 'sources-page':
                    break;
            }
        }

        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ar-SA', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: true 
            });
            
            const timeElement = document.getElementById('current-time');
            if (timeElement) {
                timeElement.textContent = timeString;
            }
        }

        function login() {
            const usernameInput = document.getElementById('username-input');
            const username = usernameInput ? usernameInput.value.trim() : userData.username;
            
            if (!username && !userData.username) {
                showNotification('الرجاء إدخال اسم المستخدم');
                return;
            }
            
            if (username) {
                userData.username = username;
            }
            
            isLoggedIn = true;
            saveData();
            
            document.getElementById('main-header').style.display = 'flex';
            document.getElementById('bottom-nav').style.display = 'flex';
            
            document.getElementById('user-name').textContent = userData.username;
            
            checkPrayerDayUpdate();
            updateDailyTip();
            updateLevelDisplay();
            
            showPage('home-page');
            
            showNotification(`مرحباً ${userData.username}`);
        }

        function updateHijriDate() {
            const today = new Date();
            
            try {
                const options = { day: 'numeric', month: 'long', year: 'numeric' };
                const hijriDate = new Intl.DateTimeFormat('ar-SA-u-ca-islamic', options).format(today);
                const gregorianDate = today.toLocaleDateString('ar-SA');
                
                const hijriElement = document.getElementById('hijri-date');
                if (hijriElement) {
                    hijriElement.innerHTML = `
                        <div style="font-weight: bold; font-size: 1.2rem;">${hijriDate}</div>
                        <div style="font-size: 1rem; opacity: 0.9; margin-top: 8px;">${gregorianDate}</div>
                    `;
                }
            } catch (e) {
                const hijriElement = document.getElementById('hijri-date');
                if (hijriElement) {
                    hijriElement.textContent = today.toLocaleDateString('ar-SA');
                }
            }
        }

        function updatePrayerDisplay() {
            const prayerTimesElement = document.getElementById('prayer-times');
            if (!prayerTimesElement) return;
            
            if (!userData.todayPrayerStars) {
                resetPrayerTableForNewDay();
            }
            
            const prayers = ['الفجر', 'الظهر', 'العصر', 'المغرب', 'العشاء'];
            
            prayers.forEach(prayerName => {
                const stars = userData.todayPrayerStars[prayerName] || [false, false, false];
                
                const buttons = prayerTimesElement.querySelectorAll(`.prayer-btn[onclick*="${prayerName}"]`);
                buttons.forEach((button, idx) => {
                    if (idx < 3) {
                        if (stars[idx]) {
                            button.textContent = '★';
                            button.classList.add('active');
                        } else {
                            button.textContent = '☆';
                            button.classList.remove('active');
                        }
                    }
                });
            });
            
            updateDailyProgress();
            checkTaskCompletion('prayer');
        }

        function togglePrayerStar(prayerName, starIndex, points, type) {
            if (!userData.todayPrayerStars[prayerName]) {
                userData.todayPrayerStars[prayerName] = [false, false, false];
            }
            
            const wasActive = userData.todayPrayerStars[prayerName][starIndex];
            
            userData.todayPrayerStars[prayerName][starIndex] = !wasActive;
            
            if (!wasActive) {
                userData.points += points;
                showNotification(`+${points} نقطة لصلاة ${prayerName} (${type})`);
                
                const allStars = userData.todayPrayerStars[prayerName];
                if (allStars.every(star => star)) {
                    const bonusPoints = 20;
                    userData.points += bonusPoints;
                    showNotification(`🎉 مكافأة! +${bonusPoints} نقطة لإكمال صلاة ${prayerName} كاملة`);
                }
            } else {
                userData.points -= points;
                if (userData.points < 0) userData.points = 0;
                showNotification(`-${points} نقطة لإلغاء ${prayerName} (${type})`);
            }
            
            updateLevelDisplay();
            updatePrayerDisplay();
            checkTaskCompletion('prayer');
            saveData();
        }

        function updateDailyProgress() {
            let totalPoints = 0;
            let maxPoints = 300;
            
            Object.values(userData.todayPrayerStars || {}).forEach(stars => {
                if (stars && Array.isArray(stars)) {
                    stars.forEach((active, idx) => {
                        if (active) {
                            totalPoints += [30, 20, 10][idx];
                        }
                    });
                }
            });
            
            const percent = Math.min(Math.round((totalPoints / maxPoints) * 100), 100);
            
            const progressFillElement = document.getElementById('progress-fill');
            const progressPercent2Element = document.getElementById('progress-percent2');
            const progressTextElement = document.getElementById('progress-text');
            const progressPointsElement = document.getElementById('progress-points');
            
            if (progressFillElement) progressFillElement.style.width = percent + '%';
            if (progressPercent2Element) progressPercent2Element.textContent = percent + '%';
            if (progressTextElement) progressTextElement.textContent = `إنجاز اليوم: ${percent}%`;
            if (progressPointsElement) progressPointsElement.textContent = `النقاط: ${userData.points}`;
        }

        function markDay() {
            const today = new Date();
            const todayStr = today.toDateString();
            
            if (userData.lastDay === todayStr) {
                showNotification('لقد سجلت حضور اليوم بالفعل');
                return;
            }
            
            const yesterday = new Date(today);
            yesterday.setDate(today.getDate() - 1);
            const yesterdayStr = yesterday.toDateString();
            
            if (userData.lastDay === yesterdayStr) {
                userData.streak++;
            } else if (userData.lastDay !== todayStr) {
                userData.streak = 1;
            }
            
            userData.lastDay = todayStr;
            userData.days++;
            userData.points += 50;
            
            updateLevelDisplay();
            saveData();
            
            showNotification('تم تسجيل حضور اليوم! +50 نقطة');
        }

        // فتح خطبة من المنبر الإسلامي
        function openSermon(youtubeURL) {
            if (youtubeURL) {
                window.open(youtubeURL, '_blank');
                showNotification('جاري فتح الخطبة على اليوتيوب');
            } else {
                showNotification('لا يوجد رابط متاح');
            }
        }

        // عرض سور الشيخ المحدد
        function showSheikhSurahs(sheikhId) {
            const sheikh = sheikhsData[sheikhId];
            if (!sheikh) return;
            
            document.getElementById('reciters-list').style.display = 'none';
            
            const surahsContainer = document.getElementById('surahs-container');
            const sheikhNameElement = document.getElementById('sheikh-name');
            const surahsListElement = document.getElementById('surahs-list');
            
            surahsContainer.style.display = 'block';
            sheikhNameElement.textContent = sheikh.name;
            
            let surahsHTML = '';
            sheikh.surahs.forEach((surah, index) => {
                surahsHTML += `
                    <div class="surah-card" onclick="openYouTubeSurah('${surah.url}')">
                        <div class="surah-title">${surah.title}</div>
                        <div class="surah-desc">${sheikh.name}</div>
                    </div>
                `;
            });
            
            surahsListElement.innerHTML = surahsHTML;
        }

        // عرض قائمة الشيوخ
        function showRecitersList() {
            document.getElementById('reciters-list').style.display = 'flex';
            document.getElementById('surahs-container').style.display = 'none';
        }

        // تشغيل سورة قرآنية مباشرة في يوتيوب
        function openYouTubeSurah(youtubeURL) {
            if (youtubeURL) {
                window.open(youtubeURL, '_blank');
                showNotification('جاري فتح السورة في اليوتيوب');
            } else {
                showNotification('لا يوجد رابط متاح');
            }
        }

        // فتح مواقع أخرى
        function openSite(url) {
            if (url) {
                window.open(url, '_blank');
                showNotification('جاري فتح الموقع');
            }
        }

        // تحديث عرض المهام
        function updateTasksDisplay() {
            const tasksContainer = document.getElementById('daily-tasks');
            if (!tasksContainer) return;
            
            const today = new Date().toDateString();
            let html = '';
            
            // زر محو مهام الموقع
            html += `
                <div style="text-align: center; margin-bottom: 25px;">
                    <button class="action-btn" onclick="showClearSiteTasksModal()" style="background: linear-gradient(45deg, #ff4444, #ff6666); border-color: #ff4444; padding: 12px 25px; font-size: 1rem;">
                        محو مهام الموقع
                    </button>
                </div>
            `;
            
            // عرض المهام النظامية
            userData.systemTasks.forEach((task, index) => {
                const isCompleted = userData.completedTasks[`${today}_${task.id}`] || false;
                
                html += `
                    <div class="task-item">
                        <div class="task-checkbox ${isCompleted ? 'checked' : ''}" 
                             onclick="toggleTask('${task.id}', ${task.points}, 'system')">
                        </div>
                        <div class="task-content">
                            <div class="task-title">${task.title}</div>
                            <div class="task-desc">${task.desc}</div>
                        </div>
                        <div class="task-points">+${task.points}</div>
                        <div class="task-actions">
                            <button class="task-action-btn" onclick="editSystemTask(${index})">✏️</button>
                        </div>
                    </div>
                `;
            });
            
            // عرض مهام المستخدم
            userData.userTasks.forEach((task, index) => {
                const taskKey = `user_${task.id}`;
                const isCompleted = userData.completedTasks[`${today}_${taskKey}`] || false;
                
                html += `
                    <div class="task-item user-task-item">
                        <div class="task-checkbox ${isCompleted ? 'checked' : ''}" 
                             onclick="toggleTask('${taskKey}', 50, 'user')">
                        </div>
                        <div class="task-content">
                            <div class="task-title">${task.title}</div>
                            <div class="task-desc">${task.desc || 'مهمة مضافة من قبلك'}</div>
                        </div>
                        <div class="task-points">+50</div>
                        <div class="task-actions">
                            <button class="task-action-btn" onclick="editUserTask(${index})">✏️</button>
                            <button class="task-action-btn" onclick="removeUserTask(${index})">🗑️</button>
                        </div>
                    </div>
                `;
            });
            
            tasksContainer.innerHTML = html;
            
            // إظهار زر الإضافة فقط إذا كان عدد المهام أقل من 10
            const addTaskBtn = document.querySelector('.add-task-btn');
            if (addTaskBtn) {
                if (userData.userTasks.length >= 10) {
                    addTaskBtn.style.display = 'none';
                    showNotification('لقد وصلت إلى الحد الأقصى للمهام المضافة (10 مهام)');
                } else {
                    addTaskBtn.style.display = 'flex';
                }
            }
        }

        function toggleTask(taskId, points, taskType) {
            const today = new Date().toDateString();
            const taskKey = `${today}_${taskId}`;
            const wasCompleted = userData.completedTasks[taskKey] || false;
            
            if (!wasCompleted) {
                userData.completedTasks[taskKey] = true;
                userData.points += points;
                showNotification(`ممتاز! +${points} نقطة لإكمال المهمة`);
                
                // حساب المهام المكتملة
                const completedTasksCount = userData.systemTasks.filter(task => 
                    userData.completedTasks[`${today}_${task.id}`]
                ).length;
                
                const completedUserTasksCount = userData.userTasks.filter(task => 
                    userData.completedTasks[`${today}_user_${task.id}`]
                ).length;
                
                const totalCompleted = completedTasksCount + completedUserTasksCount;
                const totalTasks = userData.systemTasks.length + userData.userTasks.length;
                
                if (totalCompleted === totalTasks && totalTasks > 0) {
                    const bonusPoints = 300;
                    userData.points += bonusPoints;
                    showNotification(`🎉 إنجاز رائع! +${bonusPoints} نقطة مكافأة لإكمال جميع مهام اليوم`);
                }
            } else {
                delete userData.completedTasks[taskKey];
                userData.points -= points;
                if (userData.points < 0) userData.points = 0;
                showNotification(`-${points} نقطة لإلغاء المهمة`);
            }
            
            updateLevelDisplay();
            updateTasksDisplay();
            saveData();
        }

        function checkTaskCompletion(category) {
            const today = new Date().toDateString();
            const tasksInCategory = userData.systemTasks.filter(task => task.category === category);
            
            tasksInCategory.forEach(task => {
                const taskKey = `${today}_${task.id}`;
                
                if (category === 'prayer' && task.id === 'prayer_5') {
                    const completedPrayers = Object.values(userData.todayPrayerStars).filter(stars => 
                        stars && stars[0]
                    ).length;
                    
                    if (completedPrayers >= 5 && !userData.completedTasks[taskKey]) {
                        userData.completedTasks[taskKey] = true;
                        userData.points += task.points;
                        showNotification(`🎯 أكملت مهمة ${task.title}! +${task.points} نقطة`);
                        updateLevelDisplay();
                        saveData();
                    }
                }
                
                if (category === 'azkar' && (task.id === 'morning_azkar' || task.id === 'evening_azkar')) {
                    if (task.id === 'morning_azkar' && userData.currentMorningAzkar === 6 && !userData.completedTasks[taskKey]) {
                        userData.completedTasks[taskKey] = true;
                        userData.points += task.points;
                        showNotification(`🎯 أكملت مهمة ${task.title}! +${task.points} نقطة`);
                        updateLevelDisplay();
                        saveData();
                    }
                    
                    if (task.id === 'evening_azkar' && userData.currentEveningAzkar === 6 && !userData.completedTasks[taskKey]) {
                        userData.completedTasks[taskKey] = true;
                        userData.points += task.points;
                        showNotification(`🎯 أكملت مهمة ${task.title}! +${task.points} نقطة`);
                        updateLevelDisplay();
                        saveData();
                    }
                }
            });
        }

        // === وظائف نافذة تغيير الاسم ===
        function showChangeNameModal() {
            document.getElementById('change-name-modal').style.display = 'flex';
            document.getElementById('new-name-input').value = userData.username;
            document.getElementById('new-name-input').focus();
        }

        function closeChangeNameModal() {
            document.getElementById('change-name-modal').style.display = 'none';
        }

        function saveNewName() {
            const newName = document.getElementById('new-name-input').value.trim();
            
            if (!newName) {
                showNotification('الرجاء إدخال اسم جديد');
                return;
            }
            
            if (newName === userData.username) {
                showNotification('هذا هو اسمك الحالي');
                closeChangeNameModal();
                return;
            }
            
            userData.username = newName;
            document.getElementById('user-name').textContent = newName;
            
            saveData();
            closeChangeNameModal();
            
            showNotification(`تم تغيير الاسم إلى ${newName}`);
        }

        // === وظائف التسبيح ===
        function addTasbeeh(count) {
            userData.tasbeehCount += count;
            const tasbeehCountElement = document.getElementById('tasbeeh-count');
            if (tasbeehCountElement) tasbeehCountElement.textContent = userData.tasbeehCount;
            
            userData.points += count;
            updateLevelDisplay();
            
            saveData();
            
            const circle = document.querySelector('.tasbeeh-circle');
            if (circle) {
                circle.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    circle.style.transform = 'scale(1)';
                }, 150);
            }
        }

        function resetTasbeeh() {
            userData.tasbeehCount = 0;
            const tasbeehCountElement = document.getElementById('tasbeeh-count');
            if (tasbeehCountElement) tasbeehCountElement.textContent = 0;
            saveData();
            showNotification('تم تصفير العداد');
        }

        // === وظائف إدارة المهام ===
        function showAddTaskModal() {
            document.getElementById('add-task-modal').style.display = 'flex';
            document.getElementById('task-title-input').value = '';
            document.getElementById('task-desc-input').value = '';
            document.getElementById('task-title-input').focus();
        }

        function closeAddTaskModal() {
            document.getElementById('add-task-modal').style.display = 'none';
        }

        function saveNewTask() {
            const title = document.getElementById('task-title-input').value.trim();
            const desc = document.getElementById('task-desc-input').value.trim();
            
            if (!title) {
                showNotification('الرجاء إدخال عنوان للمهمة');
                return;
            }
            
            // التحقق من عدد المهام
            if (userData.userTasks.length >= 10) {
                showNotification('لقد وصلت إلى الحد الأقصى للمهام المضافة (10 مهام)');
                closeAddTaskModal();
                return;
            }
            
            const newTask = {
                id: Date.now(),
                title: title,
                desc: desc,
                points: 50,
                type: 'user',
                dateAdded: new Date().toISOString()
            };
            
            userData.userTasks.push(newTask);
            saveData();
            updateTasksDisplay();
            closeAddTaskModal();
            
            showNotification('تم إضافة المهمة بنجاح!');
        }

        // تعديل مهمة نظامية
        function editSystemTask(index) {
            if (index >= 0 && index < userData.systemTasks.length) {
                const task = userData.systemTasks[index];
                document.getElementById('edit-task-modal').style.display = 'flex';
                document.getElementById('edit-task-title-input').value = task.title;
                document.getElementById('edit-task-desc-input').value = task.desc || '';
                document.getElementById('edit-task-id').value = 'system_' + index;
                document.getElementById('edit-task-title-input').focus();
            }
        }

        // تعديل مهمة مستخدم
        function editUserTask(index) {
            if (index >= 0 && index < userData.userTasks.length) {
                const task = userData.userTasks[index];
                document.getElementById('edit-task-modal').style.display = 'flex';
                document.getElementById('edit-task-title-input').value = task.title;
                document.getElementById('edit-task-desc-input').value = task.desc || '';
                document.getElementById('edit-task-id').value = 'user_' + index;
                document.getElementById('edit-task-title-input').focus();
            }
        }

        function closeEditTaskModal() {
            document.getElementById('edit-task-modal').style.display = 'none';
        }

        function saveEditedTask() {
            const taskId = document.getElementById('edit-task-id').value;
            const title = document.getElementById('edit-task-title-input').value.trim();
            const desc = document.getElementById('edit-task-desc-input').value.trim();
            
            if (!title) {
                showNotification('الرجاء إدخال عنوان للمهمة');
                return;
            }
            
            if (taskId.startsWith('system_')) {
                const index = parseInt(taskId.replace('system_', ''));
                if (index >= 0 && index < userData.systemTasks.length) {
                    userData.systemTasks[index].title = title;
                    userData.systemTasks[index].desc = desc;
                    saveData();
                    updateTasksDisplay();
                    closeEditTaskModal();
                    
                    showNotification('تم تعديل المهمة النظامية بنجاح!');
                }
            } else if (taskId.startsWith('user_')) {
                const index = parseInt(taskId.replace('user_', ''));
                if (index >= 0 && index < userData.userTasks.length) {
                    userData.userTasks[index].title = title;
                    userData.userTasks[index].desc = desc;
                    saveData();
                    updateTasksDisplay();
                    closeEditTaskModal();
                    
                    showNotification('تم تعديل مهمتك بنجاح!');
                }
            }
        }

        function deleteTask() {
            const taskId = document.getElementById('edit-task-id').value;
            
            if (taskId.startsWith('user_')) {
                const index = parseInt(taskId.replace('user_', ''));
                
                if (index >= 0 && index < userData.userTasks.length) {
                    if (confirm('هل أنت متأكد من حذف هذه المهمة؟')) {
                        userData.userTasks.splice(index, 1);
                        
                        // حذف حالة الإكمال للمهمة المحذوفة
                        const today = new Date().toDateString();
                        const taskKey = `user_${index}`;
                        delete userData.completedTasks[`${today}_${taskKey}`];
                        
                        saveData();
                        updateTasksDisplay();
                        closeEditTaskModal();
                        
                        showNotification('تم حذف المهمة بنجاح!');
                    }
                }
            } else {
                showNotification('لا يمكن حذف المهام النظامية، يمكنك تعديلها أو استخدام زر الإرجاع');
            }
        }

        // إرجاع المهام النظامية إلى إعداداتها الأصلية
        function restoreTaskDefaults() {
            const taskId = document.getElementById('edit-task-id').value;
            
            if (taskId.startsWith('system_')) {
                const index = parseInt(taskId.replace('system_', ''));
                
                if (index >= 0 && index < dailyTasks.length) {
                    if (confirm('هل تريد إرجاع هذه المهمة إلى إعداداتها الأصلية؟')) {
                        const originalTask = dailyTasks[index];
                        userData.systemTasks[index] = JSON.parse(JSON.stringify(originalTask));
                        
                        saveData();
                        updateTasksDisplay();
                        closeEditTaskModal();
                        
                        showNotification('تم إرجاع المهمة إلى إعداداتها الأصلية بنجاح!');
                    }
                }
            } else {
                showNotification('زر الإرجاع مخصص فقط للمهام النظامية');
            }
        }

        function removeUserTask(index) {
            if (index >= 0 && index < userData.userTasks.length) {
                if (confirm('هل أنت متأكد من حذف هذه المهمة؟')) {
                    userData.userTasks.splice(index, 1);
                    
                    // حذف حالة الإكمال للمهمة المحذوفة
                    const today = new Date().toDateString();
                    const taskKey = `user_${index}`;
                    delete userData.completedTasks[`${today}_${taskKey}`];
                    
                    saveData();
                    updateTasksDisplay();
                    
                    showNotification('تم حذف المهمة بنجاح!');
                }
            }
        }

        // نافذة محو مهام الموقع
        function showClearSiteTasksModal() {
            document.getElementById('clear-site-tasks-modal').style.display = 'flex';
        }

        function closeClearSiteTasksModal() {
            document.getElementById('clear-site-tasks-modal').style.display = 'none';
        }

        function clearSiteTasks() {
            if (confirm('هل أنت متأكد من محو جميع مهام الموقع النظامية؟ سيتم إرجاعها إلى الإعدادات الأصلية.')) {
                // إرجاع المهام النظامية إلى الأصلية
                userData.systemTasks = JSON.parse(JSON.stringify(dailyTasks));
                
                // حذف حالات إكمال المهام النظامية لليوم
                const today = new Date().toDateString();
                dailyTasks.forEach(task => {
                    delete userData.completedTasks[`${today}_${task.id}`];
                });
                
                saveData();
                updateTasksDisplay();
                closeClearSiteTasksModal();
                
                showNotification('تم محو جميع مهام الموقع النظامية وإرجاعها إلى الإعدادات الأصلية');
            }
        }

        // === وظائف الأذكار والأحاديث ===
        function updateMorningAzkar() {
            const morningTextElement = document.getElementById('morning-text');
            const morningCounterElement = document.getElementById('morning-counter');
            
            if (morningTextElement) morningTextElement.textContent = morningAzkar[userData.currentMorningAzkar];
            if (morningCounterElement) morningCounterElement.textContent = 
                `${userData.currentMorningAzkar + 1}/${morningAzkar.length}`;
        }

        function nextMorningAzkar() {
            userData.currentMorningAzkar = (userData.currentMorningAzkar + 1) % morningAzkar.length;
            updateMorningAzkar();
            userData.points += 5;
            updateLevelDisplay();
            
            if (userData.currentMorningAzkar === 0) {
                checkTaskCompletion('azkar');
            }
            
            saveData();
        }

        function prevMorningAzkar() {
            userData.currentMorningAzkar = (userData.currentMorningAzkar - 1 + morningAzkar.length) % morningAzkar.length;
            updateMorningAzkar();
            
            if (userData.points > 0) {
                userData.points -= 2;
                updateLevelDisplay();
                saveData();
                showNotification('-2 نقطة للرجوع للذكر السابق');
            }
        }

        function updateEveningAzkar() {
            const eveningTextElement = document.getElementById('evening-text');
            const eveningCounterElement = document.getElementById('evening-counter');
            
            if (eveningTextElement) eveningTextElement.textContent = eveningAzkar[userData.currentEveningAzkar];
            if (eveningCounterElement) eveningCounterElement.textContent = 
                `${userData.currentEveningAzkar + 1}/${eveningAzkar.length}`;
        }

        function nextEveningAzkar() {
            userData.currentEveningAzkar = (userData.currentEveningAzkar + 1) % eveningAzkar.length;
            updateEveningAzkar();
            userData.points += 5;
            updateLevelDisplay();
            
            if (userData.currentEveningAzkar === 0) {
                checkTaskCompletion('azkar');
            }
            
            saveData();
        }

        function prevEveningAzkar() {
            userData.currentEveningAzkar = (userData.currentEveningAzkar - 1 + eveningAzkar.length) % eveningAzkar.length;
            updateEveningAzkar();
            
            if (userData.points > 0) {
                userData.points -= 2;
                updateLevelDisplay();
                saveData();
                showNotification('-2 نقطة للرجوع للذكر السابق');
            }
        }

        // أذكار النوم
        function updateSleepAzkar() {
            const sleepTextElement = document.getElementById('sleep-text');
            const sleepCounterElement = document.getElementById('sleep-counter');
            
            if (sleepTextElement) sleepTextElement.textContent = sleepAzkar[userData.currentSleepAzkar];
            if (sleepCounterElement) sleepCounterElement.textContent = 
                `${userData.currentSleepAzkar + 1}/${sleepAzkar.length}`;
        }

        function nextSleepAzkar() {
            userData.currentSleepAzkar = (userData.currentSleepAzkar + 1) % sleepAzkar.length;
            updateSleepAzkar();
            userData.points += 5;
            updateLevelDisplay();
            saveData();
        }

        function prevSleepAzkar() {
            userData.currentSleepAzkar = (userData.currentSleepAzkar - 1 + sleepAzkar.length) % sleepAzkar.length;
            updateSleepAzkar();
            
            if (userData.points > 0) {
                userData.points -= 2;
                updateLevelDisplay();
                saveData();
                showNotification('-2 نقطة للرجوع للذكر السابق');
            }
        }

        function updateWakeupAzkar() {
            const wakeupTextElement = document.getElementById('wakeup-text');
            const wakeupCounterElement = document.getElementById('wakeup-counter');
            
            if (wakeupTextElement) wakeupTextElement.textContent = wakeupAzkar[userData.currentWakeupAzkar];
            if (wakeupCounterElement) wakeupCounterElement.textContent = 
                `${userData.currentWakeupAzkar + 1}/${wakeupAzkar.length}`;
        }

        function nextWakeupAzkar() {
            userData.currentWakeupAzkar = (userData.currentWakeupAzkar + 1) % wakeupAzkar.length;
            updateWakeupAzkar();
            userData.points += 5;
            updateLevelDisplay();
            saveData();
        }

        function prevWakeupAzkar() {
            userData.currentWakeupAzkar = (userData.currentWakeupAzkar - 1 + wakeupAzkar.length) % wakeupAzkar.length;
            updateWakeupAzkar();
            
            if (userData.points > 0) {
                userData.points -= 2;
                updateLevelDisplay();
                saveData();
                showNotification('-2 نقطة للرجوع للذكر السابق');
            }
        }

        function updateMosqueAzkar() {
            const mosqueTextElement = document.getElementById('mosque-text');
            const mosqueCounterElement = document.getElementById('mosque-counter');
            
            if (mosqueTextElement) mosqueTextElement.textContent = mosqueAzkar[userData.currentMosqueAzkar];
            if (mosqueCounterElement) mosqueCounterElement.textContent = 
                `${userData.currentMosqueAzkar + 1}/${mosqueAzkar.length}`;
        }

        function nextMosqueAzkar() {
            userData.currentMosqueAzkar = (userData.currentMosqueAzkar + 1) % mosqueAzkar.length;
            updateMosqueAzkar();
            userData.points += 5;
            updateLevelDisplay();
            saveData();
        }

        function prevMosqueAzkar() {
            userData.currentMosqueAzkar = (userData.currentMosqueAzkar - 1 + mosqueAzkar.length) % mosqueAzkar.length;
            updateMosqueAzkar();
            
            if (userData.points > 0) {
                userData.points -= 2;
                updateLevelDisplay();
                saveData();
                showNotification('-2 نقطة للرجوع للذكر السابق');
            }
        }

        function updateAfterPrayerAzkar() {
            const afterPrayerTextElement = document.getElementById('after-prayer-text');
            const afterPrayerCounterElement = document.getElementById('after-prayer-counter');
            
            if (afterPrayerTextElement) afterPrayerTextElement.textContent = afterPrayerAzkar[userData.currentAfterPrayerAzkar];
            if (afterPrayerCounterElement) afterPrayerCounterElement.textContent = 
                `${userData.currentAfterPrayerAzkar + 1}/${afterPrayerAzkar.length}`;
        }

        function nextAfterPrayerAzkar() {
            userData.currentAfterPrayerAzkar = (userData.currentAfterPrayerAzkar + 1) % afterPrayerAzkar.length;
            updateAfterPrayerAzkar();
            userData.points += 5;
            updateLevelDisplay();
            saveData();
        }

        function prevAfterPrayerAzkar() {
            userData.currentAfterPrayerAzkar = (userData.currentAfterPrayerAzkar - 1 + afterPrayerAzkar.length) % afterPrayerAzkar.length;
            updateAfterPrayerAzkar();
            
            if (userData.points > 0) {
                userData.points -= 2;
                updateLevelDisplay();
                saveData();
                showNotification('-2 نقطة للرجوع للذكر السابق');
            }
        }

        function updatePrayerTip() {
            const prayerTipElement = document.getElementById('prayer-tip-text');
            if (prayerTipElement) {
                prayerTipElement.textContent = prayerTips[userData.currentPrayerTip];
            }
        }

        function nextPrayerTip() {
            userData.currentPrayerTip = (userData.currentPrayerTip + 1) % prayerTips.length;
            updatePrayerTip();
            userData.points += 2;
            updateLevelDisplay();
            saveData();
        }

        function prevPrayerTip() {
            userData.currentPrayerTip = (userData.currentPrayerTip - 1 + prayerTips.length) % prayerTips.length;
            updatePrayerTip();
        }

        function updateHadith() {
            const hadithTextElement = document.getElementById('hadith-text');
            const hadithInfoElement = document.getElementById('hadith-info');
            
            if (hadithTextElement) hadithTextElement.textContent = hadiths[userData.currentHadith].text;
            if (hadithInfoElement) hadithInfoElement.textContent = hadiths[userData.currentHadith].info;
        }

        function nextHadith() {
            userData.currentHadith = (userData.currentHadith + 1) % hadiths.length;
            updateHadith();
            userData.points += 8;
            updateLevelDisplay();
            saveData();
        }

        function prevHadith() {
            userData.currentHadith = (userData.currentHadith - 1 + hadiths.length) % hadiths.length;
            updateHadith();
        }

        // تصفير بيانات المستخدم
        function resetUserData() {
            if (confirm('هل أنت متأكد من تصفير جميع بياناتك؟ سيتم حذف النقاط والمستوى والمهام المحفوظة.')) {
                userData.points = 0;
                userData.level = 1;
                userData.tasbeehCount = 0;
                userData.completedTasks = {};
                userData.userTasks = [];
                userData.systemTasks = JSON.parse(JSON.stringify(dailyTasks));
                userData.todayPrayerStars = {
                    'الفجر': [false, false, false],
                    'الظهر': [false, false, false],
                    'العصر': [false, false, false],
                    'المغرب': [false, false, false],
                    'العشاء': [false, false, false]
                };
                
                updateLevelDisplay();
                saveData();
                
                showNotification('تم تصفير جميع بياناتك بنجاح');
                showPage('home-page');
            }
        }

        function showNotification(message) {
            const oldNotification = document.querySelector('.notification');
            if (oldNotification) oldNotification.remove();
            
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 3000);
        }

        window.addEventListener('load', initApp);

        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                updateHijriDate();
                updateTime();
                if (isLoggedIn) {
                    checkPrayerDayUpdate();
                    updateDailyTip();
                    updateLevelDisplay();
                }
            }
        });

        window.addEventListener('online', function() {
            showNotification('تم استعادة الاتصال بالإنترنت');
        });

        window.addEventListener('offline', function() {
            showNotification('تم فقدان الاتصال بالإنترنت، جاري استخدام البيانات المحلية');
        });

        // إغلاق قائمة السمات عند النقر خارجها
        document.addEventListener('click', function(event) {
            const themeMenu = document.getElementById('theme-menu');
            
            if (themeMenu && themeMenu.classList.contains('active') && 
                !themeMenu.contains(event.target) && 
                !event.target.closest('.settings-option')) {
                themeMenu.classList.remove('active');
            }
        });
    </script>
</body>
</html>
